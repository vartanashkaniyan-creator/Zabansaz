<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª API Client Ù¾Ø§ÛŒÙ‡ - Vakamova</title>
    <style>
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f8fafc;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Vazir', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
        }
        
        header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .badge {
            background: var(--success);
            color: white;
            padding: 6px 18px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .test-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: var(--light);
            border-bottom: 2px solid #e2e8f0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border-radius: 12px;
            min-width: 130px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .stat:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            padding: 30px;
        }
        
        .test-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(79, 70, 229, 0.15);
        }
        
        .test-card.passed {
            border-color: var(--success);
            border-left: 6px solid var(--success);
        }
        
        .test-card.failed {
            border-color: var(--danger);
            border-left: 6px solid var(--danger);
        }
        
        .test-card.running {
            border-color: var(--warning);
            border-left: 6px solid var(--warning);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }
        
        .test-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .test-result {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        
        .passed .test-result {
            background: #d1fae5;
            color: #065f46;
        }
        
        .failed .test-result {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .running .test-result {
            background: #fef3c7;
            color: #92400e;
        }
        
        .test-desc {
            color: #6b7280;
            margin-bottom: 20px;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        .test-output {
            background: var(--light);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 18px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 20px;
            max-height: 250px;
            overflow-y: auto;
            direction: ltr;
            text-align: left;
        }
        
        .test-output.success {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }
        
        .test-output.error {
            background: #fef2f2;
            border-color: #fecaca;
        }
        
        .action-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 30px;
            border-top: 2px solid #e2e8f0;
            background: var(--light);
        }
        
        button {
            background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 14px 35px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-width: 200px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(79, 70, 229, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .console-panel {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            margin: 0 30px 30px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            direction: ltr;
            text-align: left;
            border: 2px solid #334155;
        }
        
        .console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #475569;
        }
        
        .tab-controls {
            display: flex;
            gap: 10px;
            padding: 0 30px;
            background: var(--light);
            border-bottom: 2px solid #e2e8f0;
        }
        
        .tab {
            padding: 15px 25px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: bold;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(79, 70, 229, 0.1);
        }
        
        .loading {
            display: inline-block;
            width: 22px;
            height: 22px;
            border: 3px solid #e2e8f0;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
                padding: 20px;
                gap: 20px;
            }
            
            header h1 {
                font-size: 1.6rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .test-stats {
                flex-direction: column;
                align-items: stretch;
            }
            
            .stat {
                flex-direction: row;
                justify-content: space-between;
                min-width: auto;
            }
            
            button {
                min-width: 150px;
                padding: 12px 25px;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: center;
            }
        }
        
        .time-badge {
            background: #6366f1;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .request-details {
            background: #f1f5f9;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }
        
        .method-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .method-get { background: #10b981; color: white; }
        .method-post { background: #3b82f6; color: white; }
        .method-put { background: #f59e0b; color: white; }
        .method-delete { background: #ef4444; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <span>ğŸŒ ØªØ³Øª API Client Ù¾Ø§ÛŒÙ‡</span>
                <span class="badge">Vakamova Core</span>
            </h1>
            <p>ØªØ³Øª Ú©Ø§Ù…Ù„ Ù…Ø§Ú˜ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± - Ø§ØµÙˆÙ„ SOLID + Mock Server</p>
        </header>
        
        <div class="tab-controls">
            <button class="tab active" onclick="showTab('basic-tests')">ğŸ§ª ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡</button>
            <button class="tab" onclick="showTab('advanced-tests')">âš¡ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</button>
            <button class="tab" onclick="showTab('mock-server')">ğŸ–¥ï¸ Mock Server</button>
        </div>
        
        <div id="basic-tests" class="tab-content">
            <div class="test-stats">
                <div class="stat passed">
                    <span class="stat-value" id="passed-count">0</span>
                    <span class="stat-label">Ù…ÙˆÙÙ‚</span>
                </div>
                <div class="stat failed">
                    <span class="stat-value" id="failed-count">0</span>
                    <span class="stat-label">Ù†Ø§Ù…ÙˆÙÙ‚</span>
                </div>
                <div class="stat running">
                    <span class="stat-value" id="running-count">0</span>
                    <span class="stat-label">Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="coverage">0%</span>
                    <span class="stat-label">Ù¾ÙˆØ´Ø´ ØªØ³Øª</span>
                </div>
            </div>
            
            <div class="test-grid" id="test-grid">
                <!-- ØªØ³Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
        </div>
        
        <div id="mock-server" class="tab-content" style="display: none; padding: 30px;">
            <h2 style="margin-bottom: 20px; color: var(--primary);">ğŸ–¥ï¸ Mock Server Panel</h2>
            <div style="background: var(--light); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                <h3 style="margin-bottom: 15px; color: var(--dark);">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø±ÙˆØ± Ù…Ø¬Ø§Ø²ÛŒ</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: bold;">Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® (Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡)</label>
                        <input type="range" id="response-time" min="0" max="5000" value="500" style="width: 100%;">
                        <div style="text-align: center; margin-top: 5px;" id="response-time-label">500ms</div>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: bold;">Ù†Ø±Ø® Ø®Ø·Ø§ (%)</label>
                        <input type="range" id="error-rate" min="0" max="100" value="10" style="width: 100%;">
                        <div style="text-align: center; margin-top: 5px;" id="error-rate-label">10%</div>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: bold;">Ø­Ø§Ù„Øª Ø´Ø¨Ú©Ù‡</label>
                        <select id="network-mode" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <option value="online">ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
                            <option value="slow">ğŸŒ Ú©Ù†Ø¯</option>
                            <option value="offline">ğŸ”´ Ø¢ÙÙ„Ø§ÛŒÙ†</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div style="background: var(--light); padding: 25px; border-radius: 15px;">
                <h3 style="margin-bottom: 15px; color: var(--dark);">Ù„Ø§Ú¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h3>
                <div id="request-log" style="max-height: 300px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.9rem;">
                    <!-- Ù„Ø§Ú¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ -->
                </div>
            </div>
        </div>
        
        <div class="console-panel">
            <div class="console-header">
                <span>ğŸ“Š Ú©Ù†Ø³ÙˆÙ„ ØªØ³Øª (Live Log)</span>
                <button onclick="clearConsole()" style="background: #475569; padding: 5px 15px; font-size: 0.8rem;">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </div>
            <div id="console-output"></div>
        </div>
        
        <div class="action-bar">
            <button id="run-all-btn">
                <span>ğŸš€</span>
                Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§
            </button>
            <button id="run-failed-btn" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                <span>ğŸ”„</span>
                Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚
            </button>
            <button id="clear-btn" style="background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);">
                <span>ğŸ§¹</span>
                Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬
            </button>
        </div>
    </div>

    <script>
        // ========== Ø³ÛŒØ³ØªÙ… Ù„Ø§Ú¯ ==========
        const logger = {
            log: (message, type = 'info', data = null) => {
                const time = new Date().toLocaleTimeString('fa-IR');
                const output = document.getElementById('console-output');
                const logEntry = document.createElement('div');
                
                let icon = 'ğŸ“';
                let color = '#94a3b8';
                
                switch(type) {
                    case 'success': icon = 'âœ…'; color = '#10b981'; break;
                    case 'error': icon = 'âŒ'; color = '#ef4444'; break;
                    case 'warning': icon = 'âš ï¸'; color = '#f59e0b'; break;
                    case 'request': icon = 'ğŸ“¡'; color = '#3b82f6'; break;
                    case 'response': icon = 'ğŸ“¥'; color = '#8b5cf6'; break;
                }
                
                logEntry.innerHTML = `
                    <span style="color: #94a3b8">[${time}]</span>
                    <span style="color: ${color}; font-weight: ${type === 'error' ? 'bold' : 'normal'}">
                        ${icon} ${message}
                    </span>
                    ${data ? `<small style="color: #64748b">${JSON.stringify(data)}</small>` : ''}
                `;
                
                output.appendChild(logEntry);
                output.scrollTop = output.scrollHeight;
                
                if (type === 'error') {
                    console.error(message, data);
                } else {
                    console.log(`${icon} ${message}`, data || '');
                }
            }
        };

        // ========== Mock Server ==========
        class MockServer {
            constructor() {
                this.responseTime = 500;
                this.errorRate = 10;
                this.networkMode = 'online';
                this.requestHistory = [];
                
                this.endpoints = {
                    '/api/users': { method: 'GET', description: 'Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†' },
                    '/api/users/:id': { method: 'GET', description: 'Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Ø¨Ø±' },
                    '/api/auth/login': { method: 'POST', description: 'ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±' },
                    '/api/lessons': { method: 'GET', description: 'Ù„ÛŒØ³Øª Ø¯Ø±ÙˆØ³' },
                    '/api/payments': { method: 'POST', description: 'Ø«Ø¨Øª Ù¾Ø±Ø¯Ø§Ø®Øª' }
                };
            }
            
            async handleRequest(method, url, data = null, headers = {}) {
                const startTime = Date.now();
                const requestId = `REQ_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`;
                
                const logEntry = {
                    id: requestId,
                    method,
                    url,
                    timestamp: new Date().toLocaleTimeString('fa-IR'),
                    status: 'pending',
                    responseTime: null
                };
                
                this.requestHistory.unshift(logEntry);
                this.updateRequestLog();
                
                logger.log(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª ${method} Ø¨Ù‡ ${url}`, 'request', data);
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø±Ø§ÛŒØ· Ø´Ø¨Ú©Ù‡
                if (this.networkMode === 'offline') {
                    logEntry.status = 'failed';
                    logEntry.responseTime = Date.now() - startTime;
                    this.updateRequestLog();
                    throw new Error('Ø´Ø¨Ú©Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
                }
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ§Ø®ÛŒØ± Ø´Ø¨Ú©Ù‡
                await this.delay(this.responseTime);
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø±Ø® Ø®Ø·Ø§
                if (Math.random() * 100 < this.errorRate) {
                    logEntry.status = 'failed';
                    logEntry.responseTime = Date.now() - startTime;
                    this.updateRequestLog();
                    throw new Error(`Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (${Math.floor(Math.random() * 500)})`);
                }
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø®
                const responseTime = Date.now() - startTime;
                logEntry.status = 'success';
                logEntry.responseTime = responseTime;
                this.updateRequestLog();
                
                logger.log(`Ù¾Ø§Ø³Ø® Ø§Ø² ${url} Ø¯Ø± ${responseTime}ms`, 'response');
                
                return this.generateResponse(method, url, data);
            }
            
            generateResponse(method, url, data) {
                const responses = {
                    'GET /api/users': {
                        success: true,
                        data: [
                            { id: 1, name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', email: 'ali@example.com' },
                            { id: 2, name: 'ÙØ§Ø·Ù…Ù‡ Ú©Ø±ÛŒÙ…ÛŒ', email: 'fatemeh@example.com' },
                            { id: 3, name: 'Ù…Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ', email: 'mohammad@example.com' }
                        ],
                        pagination: { page: 1, total: 3 }
                    },
                    'POST /api/auth/login': {
                        success: true,
                        data: {
                            token: 'mock_jwt_token_' + Math.random().toString(36).substr(2),
                            user: { id: 1, name: 'Ú©Ø§Ø±ÙˆØ± ØªØ³Øª', email: data?.email || 'test@example.com' },
                            expiresIn: 3600
                        }
                    },
                    'GET /api/lessons': {
                        success: true,
                        data: [
                            { id: 1, title: 'Ù…Ú©Ø§Ù„Ù…Ù‡ Ø±ÙˆØ²Ù…Ø±Ù‡', level: 'Ù…Ù‚Ø¯Ù…Ø§ØªÛŒ' },
                            { id: 2, title: 'Ú¯Ø±Ø§Ù…Ø± Ù¾ÛŒØ´Ø±ÙØªÙ‡', level: 'Ù…ØªÙˆØ³Ø·' },
                            { id: 3, title: 'Ø§ØµØ·Ù„Ø§Ø­Ø§Øª ØªØ¬Ø§Ø±ÛŒ', level: 'Ù¾ÛŒØ´Ø±ÙØªÙ‡' }
                        ]
                    },
                    'POST /api/payments': {
                        success: true,
                        data: {
                            transactionId: 'TXN_' + Date.now(),
                            amount: data?.amount || 0,
                            status: 'pending'
                        }
                    }
                };
                
                const key = `${method} ${url.split('?')[0]}`;
                return responses[key] || {
                    success: true,
                    data: { method, url, receivedData: data, message: 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯' }
                };
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            updateRequestLog() {
                const logContainer = document.getElementById('request-log');
                if (!logContainer) return;
                
                logContainer.innerHTML = this.requestHistory.slice(0, 10).map(req => `
                    <div style="padding: 10px; border-bottom: 1px solid #cbd5e1; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <span style="color: ${req.method === 'GET' ? '#10b981' : req.method === 'POST' ? '#3b82f6' : '#ef4444'}; 
                                          font-weight: bold;">${req.method}</span>
                            <span style="color: #475569; margin: 0 10px;">${req.url}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="color: #64748b; font-size: 0.9rem;">${req.timestamp}</span>
                            <span style="color: ${req.status === 'success' ? '#10b981' : '#ef4444'}; 
                                          font-weight: bold;">${req.status === 'success' ? 'âœ…' : 'âŒ'}</span>
                            ${req.responseTime ? `<span style="color: #6366f1; font-size: 0.9rem;">${req.responseTime}ms</span>` : ''}
                        </div>
                    </div>
                `).join('');
            }
            
            updateControls() {
                const responseTimeInput = document.getElementById('response-time');
                const errorRateInput = document.getElementById('error-rate');
                const networkModeSelect = document.getElementById('network-mode');
                
                if (responseTimeInput) {
                    responseTimeInput.value = this.responseTime;
                    document.getElementById('response-time-label').textContent = `${this.responseTime}ms`;
                }
                
                if (errorRateInput) {
                    errorRateInput.value = this.errorRate;
                    document.getElementById('error-rate-label').textContent = `${this.errorRate}%`;
                }
                
                if (networkModeSelect) {
                    networkModeSelect.value = this.networkMode;
                }
            }
        }

        // ========== API Client ==========
        class ApiClient {
            constructor(baseURL = 'https://api.vakamova.test') {
                this.baseURL = baseURL;
                this.mockServer = new MockServer();
                this.defaultHeaders = {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                };
                this.authToken = null;
            }
            
            setAuthToken(token) {
                this.authToken = token;
                logger.log(`ØªÙˆÚ©Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯`, 'success');
            }
            
            async request(method, endpoint, data = null, options = {}) {
                const url = endpoint.startsWith('http') ? endpoint : `${this.baseURL}${endpoint}`;
                const headers = {
                    ...this.defaultHeaders,
                    ...options.headers
                };
                
                if (this.authToken) {
                    headers['Authorization'] = `Bearer ${this.authToken}`;
                }
                
                const startTime = Date.now();
                
                try {
                    // Ø¯Ø± Ù…Ø­ÛŒØ· ØªØ³Øª Ø§Ø² Mock Server Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    if (url.includes('vakamova.test')) {
                        const response = await this.mockServer.handleRequest(method, endpoint, data, headers);
                        const responseTime = Date.now() - startTime;
                        
                        logger.log(`${method} ${endpoint} - ${responseTime}ms`, 
                                 response.success ? 'success' : 'warning');
                        
                        if (!response.success) {
                            throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                        }
                        
                        return {
                            success: true,
                            data: response.data,
                            status: 200,
                            headers: {},
                            responseTime
                        };
                    }
                    
                    // Ø¯Ø± Ù…Ø­ÛŒØ· ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² fetch Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), options.timeout || 10000);
                    
                    const fetchOptions = {
                        method,
                        headers,
                        signal: controller.signal,
                        ...(data && method !== 'GET' && { body: JSON.stringify(data) })
                    };
                    
                    const response = await fetch(url, fetchOptions);
                    clearTimeout(timeoutId);
                    
                    const responseTime = Date.now() - startTime;
                    const responseData = await response.json().catch(() => ({}));
                    
                    return {
                        success: response.ok,
                        data: responseData,
                        status: response.status,
                        headers: Object.fromEntries(response.headers.entries()),
                        responseTime
                    };
                    
                } catch (error) {
                    const responseTime = Date.now() - startTime;
                    logger.log(`Ø®Ø·Ø§ Ø¯Ø± ${method} ${endpoint}: ${error.message}`, 'error');
                    
                    return {
                        success: false,
                        error: error.message,
                        status: error.name === 'AbortError' ? 408 : 500,
                        responseTime
                    };
                }
            }
            
            async get(endpoint, queryParams = null, options = {}) {
                let url = endpoint;
                if (queryParams) {
                    const params = new URLSearchParams(queryParams).toString();
                    url += `?${params}`;
                }
                return this.request('GET', url, null, options);
            }
            
            async post(endpoint, data, options = {}) {
                return this.request('POST', endpoint, data, options);
            }
            
            async put(endpoint, data, options = {}) {
                return this.request('PUT', endpoint, data, options);
            }
            
            async delete(endpoint, options = {}) {
                return this.request('DELETE', endpoint, null, options);
            }
        }

        // ========== ØªØ³Øªâ€ŒÙ‡Ø§ ==========
        const tests = [
            {
                id: 'test-1',
                title: 'ØªØ³Øª Ø§ÛŒØ¬Ø§Ø¯ API Client',
                description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ ØµØ­ÛŒØ­ Ø´ÛŒ ApiClient Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡',
                run: async () => {
                    const api = new ApiClient();
                    
                    if (!api.baseURL) throw new Error('baseURL ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡');
                    if (!api.defaultHeaders) throw new Error('defaultHeaders ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡');
                    if (!api.mockServer) throw new Error('Mock Server Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø´Ø¯Ù‡');
                    
                    return 'âœ… ApiClient Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯';
                }
            },
            {
                id: 'test-2',
                title: 'ØªØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø³Ø§Ø¯Ù‡',
                description: 'Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø² Ø³Ø±ÙˆØ±',
                run: async () => {
                    const api = new ApiClient();
                    const result = await api.get('/api/users');
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    if (!result.data) throw new Error('Ø¯ÛŒØªØ§ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    if (!Array.isArray(result.data)) throw new Error('ÙØ±Ù…Øª Ø¯ÛŒØªØ§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
                    
                    return `âœ… Ø¯Ø±ÛŒØ§ÙØª ${result.data.length} Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª`;
                }
            },
            {
                id: 'test-3',
                title: 'ØªØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ø¨Ø§ Ø¯Ø§Ø¯Ù‡',
                description: 'Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡ Ù„Ø§Ú¯ÛŒÙ† Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†',
                run: async () => {
                    const api = new ApiClient();
                    const loginData = {
                        email: 'user@vakamova.com',
                        password: 'securePassword123'
                    };
                    
                    const result = await api.post('/api/auth/login', loginData);
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    if (!result.data.token) throw new Error('ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    if (!result.data.user) throw new Error('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    
                    // Ø°Ø®ÛŒØ±Ù‡ ØªÙˆÚ©Ù† Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ
                    api.setAuthToken(result.data.token);
                    
                    return `âœ… Ù„Ø§Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚ - ØªÙˆÚ©Ù†: ${result.data.token.substring(0, 20)}...`;
                }
            },
            {
                id: 'test-4',
                title: 'ØªØ³Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¨Ø§ ØªÙˆÚ©Ù†',
                description: 'Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ù‡Ø¯Ø± Authorization',
                run: async () => {
                    const api = new ApiClient();
                    
                    // Ø§Ø¨ØªØ¯Ø§ ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    const loginResult = await api.post('/api/auth/login', {
                        email: 'test@vakamova.com',
                        password: 'test123'
                    });
                    
                    if (!loginResult.success) throw new Error('Ù„Ø§Ú¯ÛŒÙ† Ù†Ø§Ù…ÙˆÙÙ‚');
                    
                    api.setAuthToken(loginResult.data.token);
                    
                    // Ø³Ù¾Ø³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø­Ø±Ø§Ø² Ø´Ø¯Ù‡ Ù…ÛŒâ€ŒØ²Ù†ÛŒÙ…
                    const result = await api.get('/api/lessons');
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø­Ø±Ø§Ø² Ø´Ø¯Ù‡ Ù†Ø§Ù…ÙˆÙÙ‚');
                    
                    return 'âœ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¨Ø§ ØªÙˆÚ©Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯';
                }
            },
            {
                id: 'test-5',
                title: 'ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ - Ø´Ø¨Ú©Ù‡',
                description: 'Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù‚Ø·Ø¹ÛŒ Ø´Ø¨Ú©Ù‡ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø±ÙØªØ§Ø±',
                run: async () => {
                    const api = new ApiClient();
                    api.mockServer.networkMode = 'offline';
                    
                    try {
                        await api.get('/api/users');
                        throw new Error('Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ Ø§Ù…Ø§ Ù†Ø¯Ø§Ø¯!');
                    } catch (error) {
                        if (!error.message.includes('Ø´Ø¨Ú©Ù‡')) {
                            throw new Error(`Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${error.message}`);
                        }
                    } finally {
                        api.mockServer.networkMode = 'online';
                    }
                    
                    return 'âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯';
                }
            },
            {
                id: 'test-6',
                title: 'ØªØ³Øª Timeout Ø¯Ø±Ø®ÙˆØ§Ø³Øª',
                description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù„ØºÙˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ',
                run: async () => {
                    const api = new ApiClient();
                    api.mockServer.responseTime = 3000; // 3 Ø«Ø§Ù†ÛŒÙ‡ ØªØ§Ø®ÛŒØ±
                    
                    const startTime = Date.now();
                    const result = await api.get('/api/users', null, { timeout: 1000 });
                    const elapsed = Date.now() - startTime;
                    
                    if (result.success) {
                        throw new Error('Ø¨Ø§ÛŒØ¯ timeout Ù…ÛŒâ€ŒØ®ÙˆØ±Ø¯ Ø§Ù…Ø§ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯!');
                    }
                    
                    if (elapsed > 1500) {
                        throw new Error(`Timeout Ø¯ÛŒØ± Ø¹Ù…Ù„ Ú©Ø±Ø¯: ${elapsed}ms`);
                    }
                    
                    api.mockServer.responseTime = 500; // Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¹Ø§Ø¯ÛŒ
                    
                    return `âœ… Timeout Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¹Ù…Ù„ Ú©Ø±Ø¯ (${elapsed}ms)`;
                }
            },
            {
                id: 'test-7',
                title: 'ØªØ³Øª Query Parameters',
                description: 'Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± URL',
                run: async () => {
                    const api = new ApiClient();
                    
                    const params = {
                        page: 1,
                        limit: 10,
                        search: 'Ø¹Ù„ÛŒ',
                        sort: 'name',
                        order: 'asc'
                    };
                    
                    const result = await api.get('/api/users', params);
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ query params Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ú¯ÛŒÙ†ÛŒØ´Ù† Ø¯Ø± Ù¾Ø§Ø³Ø®
                    if (!result.data.pagination) {
                        throw new Error('Ø§Ø·Ù„Ø§Ø¹Ø§Øª pagination Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯');
                    }
                    
                    return 'âœ… Ø§Ø±Ø³Ø§Ù„ Query Parameters Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯';
                }
            },
            {
                id: 'test-8',
                title: 'ØªØ³Øª Headers Ø³ÙØ§Ø±Ø´ÛŒ',
                description: 'Ø§Ø±Ø³Ø§Ù„ Ù‡Ø¯Ø±Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª',
                run: async () => {
                    const api = new ApiClient();
                    
                    const customHeaders = {
                        'X-API-Version': '2.0',
                        'X-Client-Type': 'mobile',
                        'X-Request-ID': `req_${Date.now()}`
                    };
                    
                    const result = await api.get('/api/lessons', null, {
                        headers: customHeaders
                    });
                    
                    if (!result.success) throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ headers Ø³ÙØ§Ø±Ø´ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    
                    return 'âœ… Ø§Ø±Ø³Ø§Ù„ Headers Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯';
                }
            },
            {
                id: 'test-9',
                title: 'ØªØ³Øª Retry Logic',
                description: 'ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ù¾Ø³ Ø§Ø² Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Øª',
                run: async () => {
                    const api = new ApiClient();
                    let attemptCount = 0;
                    
                    // Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆÙ‚ØªÛŒ Ù†Ø±Ø® Ø®Ø·Ø§
                    api.mockServer.errorRate = 100;
                    
                    try {
                        await api.get('/api/users');
                        throw new Error('Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ Ø§Ù…Ø§ Ù†Ø¯Ø§Ø¯!');
                    } catch (error) {
                        if (!error.message.includes('Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±')) {
                            throw new Error(`Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${error.message}`);
                        }
                    } finally {
                        api.mockServer.errorRate = 10;
                    }
                    
                    // Ø­Ø§Ù„Ø§ Ø¨Ø§ÛŒØ¯ Ù…ÙˆÙÙ‚ Ø´ÙˆØ¯
                    const result = await api.get('/api/users');
                    if (!result.success) throw new Error('ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
                    
                    return 'âœ… Retry Logic Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªØ³Øª Ø´Ø¯';
                }
            },
            {
                id: 'test-10',
                title: 'ØªØ³Øª Performance',
                description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø±Ø¹Øª Ù¾Ø§Ø³Ø®â€ŒØ¯Ù‡ÛŒ API',
                run: async () => {
                    const api = new ApiClient();
                    api.mockServer.responseTime = 100; // Ø³Ø±Ø¹Øª Ø®ÙˆØ¨
                    
                    const iterations = 5;
                    let totalTime = 0;
                    let successes = 0;
                    
                    for (let i = 0; i < iterations; i++) {
                        const startTime = Date.now();
                        const result = await api.get('/api/users');
                        const elapsed = Date.now() - startTime;
                        
                        totalTime += elapsed;
                        if (result.success) successes++;
                        
                        await api.delay(50); // ÙˆÙ‚ÙÙ‡ Ú©ÙˆØªØ§Ù‡
                    }
                    
                    const avgTime = totalTime / iterations;
                    const successRate = (successes / iterations) * 100;
                    
                    if (avgTime > 300) {
                        throw new Error(`Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ø¨Ø§Ù„Ø§ Ø§Ø³Øª: ${avgTime.toFixed(1)}ms`);
                    }
                    
                    if (successRate < 80) {
                        throw new Error(`Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§ÛŒÛŒÙ† Ø§Ø³Øª: ${successRate.toFixed(1)}%`);
                    }
                    
                    return `âœ… Performance Ø¹Ø§Ù„ÛŒ - Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†: ${avgTime.toFixed(1)}ms - Ù…ÙˆÙÙ‚ÛŒØª: ${successRate.toFixed(1)}%`;
                }
            }
        ];

        // ========== Test Manager ==========
        const TestManager = {
            tests: tests,
            results: {},
            runningTests: new Set(),
            
            init() {
                this.renderTests();
                this.setupEventListeners();
                this.setupMockControls();
                logger.log('ğŸš€ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API Client Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø¬Ø±Ø§ Ù‡Ø³ØªÙ†Ø¯', 'success');
            },
            
            renderTests() {
                const testGrid = document.getElementById('test-grid');
                if (!testGrid) return;
                
                testGrid.innerHTML = this.tests.map(test => `
                    <div class="test-card pending" id="card-${test.id}">
                        <div class="test-title">
                            <span>${test.title}</span>
                            <span class="test-result" id="result-${test.id}">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
                        </div>
                        <div class="test-desc">${test.description}</div>
                        <div class="test-output" id="output-${test.id}"></div>
                    </div>
                `).join('');
                
                this.updateStats();
            },
            
            async runTest(test) {
                if (this.runningTests.has(test.id)) {
                    logger.log(`ØªØ³Øª ${test.title} Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª`, 'warning');
                    return;
                }
                
                this.runningTests.add(test.id);
                this.updateRunningCount();
                
                const card = document.getElementById(`card-${test.id}`);
                const output = document.getElementById(`output-${test.id}`);
                const resultSpan = document.getElementById(`result-${test.id}`);
                
                card.className = 'test-card running';
                resultSpan.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§';
                output.className = 'test-output';
                output.innerHTML = '<div class="loading"></div> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª...';
                
                logger.log(`Ø´Ø±ÙˆØ¹ ØªØ³Øª: ${test.title}`, 'info');
                
                try {
                    const startTime = Date.now();
                    const result = await test.run();
                    const elapsed = Date.now() - startTime;
                    
                    card.className = 'test-card passed';
                    resultSpan.textContent = 'Ù…ÙˆÙÙ‚';
                    output.className = 'test-output success';
                    output.innerHTML = `
                        <strong>âœ… Ù†ØªÛŒØ¬Ù‡:</strong> ${result}
                        <div class="time-badge">${elapsed}ms</div>
                    `;
                    
                    this.results[test.id] = { success: true, result, time: elapsed };
                    logger.log(`ØªØ³Øª "${test.title}" Ù…ÙˆÙÙ‚ Ø´Ø¯ (${elapsed}ms)`, 'success');
                    
                } catch (error) {
                    card.className = 'test-card failed';
                    resultSpan.textContent = 'Ù†Ø§Ù…ÙˆÙÙ‚';
                    output.className = 'test-output error';
                    output.innerHTML = `
                        <strong>âŒ Ø®Ø·Ø§:</strong> ${error.message}
                        ${error.stack ? `<small style="display: block; margin-top: 10px; color: #9ca3af;">${error.stack}</small>` : ''}
                    `;
                    
                    this.results[test.id] = { success: false, error: error.message };
                    logger.log(`ØªØ³Øª "${test.title}" Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯: ${error.message}`, 'error');
                    
                } finally {
                    this.runningTests.delete(test.id);
                    this.updateRunningCount();
                    this.updateStats();
                }
            },
            
            async runAllTests() {
                const runBtn = document.getElementById('run-all-btn');
                runBtn.disabled = true;
                runBtn.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§...';
                
                logger.log('ğŸš€ Ø´Ø±ÙˆØ¹ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API...', 'success');
                
                for (const test of this.tests) {
                    await this.runTest(test);
                    await this.delay(300); // ÙˆÙ‚ÙÙ‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¨Ù‡ØªØ±
                }
                
                runBtn.disabled = false;
                runBtn.innerHTML = '<span>ğŸš€</span> Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§';
                
                const passed = Object.values(this.results).filter(r => r.success).length;
                const total = this.tests.length;
                const percentage = ((passed / total) * 100).toFixed(1);
                
                logger.log(`ğŸ¯ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${passed} Ø§Ø² ${total} Ù…ÙˆÙÙ‚ (${percentage}%)`, 
                          passed === total ? 'success' : 'warning');
            },
            
            async runFailedTests() {
                const failedTests = this.tests.filter(test => 
                    this.results[test.id] && !this.results[test.id].success
                );
                
                if (failedTests.length === 0) {
                    logger.log('Ù‡ÛŒÚ† ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'info');
                    return;
                }
                
                logger.log(`Ø§Ø¬Ø±Ø§ÛŒ ${failedTests.length} ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚...`, 'info');
                
                for (const test of failedTests) {
                    await this.runTest(test);
                    await this.delay(300);
                }
            },
            
            clearTests() {
                this.tests.forEach(test => {
                    const card = document.getElementById(`card-${test.id}`);
                    const output = document.getElementById(`output-${test.id}`);
                    const resultSpan = document.getElementById(`result-${test.id}`);
                    
                    if (card) card.className = 'test-card pending';
                    if (resultSpan) resultSpan.textContent = 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                    if (output) {
                        output.className = 'test-output';
                        output.innerHTML = '';
                    }
                });
                
                this.results = {};
                this.runningTests.clear();
                this.updateStats();
                logger.log('ğŸ§¹ Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯', 'info');
            },
            
            updateStats() {
                const passed = Object.values(this.results).filter(r => r.success).length;
                const failed = Object.values(this.results).filter(r => !r.success).length;
                const total = this.tests.length;
                const pending = total - passed - failed;
                
                document.getElementById('passed-count').textContent = passed;
                document.getElementById('failed-count').textContent = failed;
                document.getElementById('pending-count').textContent = pending;
                
                const coverage = total > 0 ? Math.round((passed / total) * 100) : 0;
                document.getElementById('coverage').textContent = `${coverage}%`;
            },
            
            updateRunningCount() {
                const runningCount = this.runningTests.size;
                document.getElementById('running-count').textContent = runningCount;
            },
            
            setupEventListeners() {
                document.getElementById('run-all-btn').addEventListener('click', () => this.runAllTests());
                document.getElementById('run-failed-btn').addEventListener('click', () => this.runFailedTests());
                document.getElementById('clear-btn').addEventListener('click', () => this.clearTests());
                
                // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ø§Ø±Øª ØªØ³Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªÚ©ÛŒ
                this.tests.forEach(test => {
                    const card = document.getElementById(`card-${test.id}`);
                    if (card) {
                        card.addEventListener('click', (e) => {
                            if (!e.target.closest('.test-result') && !e.target.closest('button')) {
                                this.runTest(test);
                            }
                        });
                    }
                });
            },
            
            setupMockControls() {
                const responseTimeInput = document.getElementById('response-time');
                const errorRateInput = document.getElementById('error-rate');
                const networkModeSelect = document.getElementById('network-mode');
                
                if (responseTimeInput) {
                    responseTimeInput.addEventListener('input', (e) => {
                        const value = parseInt(e.target.value);
                        document.getElementById('response-time-label').textContent = `${value}ms`;
                        
                        // Ø¢Ù¾Ø¯ÛŒØª Ù‡Ù…Ù‡ ApiClient instances
                        const api = new ApiClient();
                        api.mockServer.responseTime = value;
                        logger.log(`Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ø³Ø±ÙˆØ± Ø¨Ù‡ ${value}ms ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯`, 'info');
                    });
                }
                
                if (errorRateInput) {
                    errorRateInput.addEventListener('input', (e) => {
                        const value = parseInt(e.target.value);
                        document.getElementById('error-rate-label').textContent = `${value}%`;
                        
                        const api = new ApiClient();
                        api.mockServer.errorRate = value;
                        logger.log(`Ù†Ø±Ø® Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± Ø¨Ù‡ ${value}% ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯`, 'info');
                    });
                }
                
                if (networkModeSelect) {
                    networkModeSelect.addEventListener('change', (e) => {
                        const value = e.target.value;
                        
                        const api = new ApiClient();
                        api.mockServer.networkMode = value;
                        
                        let message = '';
                        let type = 'info';
                        
                        switch(value) {
                            case 'online': message = 'Ø­Ø§Ù„Øª Ø´Ø¨Ú©Ù‡: Ø¢Ù†Ù„Ø§ÛŒÙ† ğŸŸ¢'; type = 'success'; break;
                            case 'slow': message = 'Ø­Ø§Ù„Øª Ø´Ø¨Ú©Ù‡: Ú©Ù†Ø¯ ğŸŒ'; type = 'warning'; break;
                            case 'offline': message = 'Ø­Ø§Ù„Øª Ø´Ø¨Ú©Ù‡: Ø¢ÙÙ„Ø§ÛŒÙ† ğŸ”´'; type = 'error'; break;
                        }
                        
                        logger.log(message, type);
                    });
                }
            },
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        };

        // ========== Utility Functions ==========
        function showTab(tabId) {
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Ù†Ù…Ø§ÛŒØ´ ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById(tabId).style.display = 'block';
            event.target.classList.add('active');
        }
        
        function clearConsole() {
            document.getElementById('console-output').innerHTML = '';
            logger.log('Ú©Ù†Ø³ÙˆÙ„ Ù¾Ø§Ú© Ø´Ø¯', 'info');
        }

        // ========== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ==========
        document.addEventListener('DOMContentLoaded', () => {
            TestManager.init();
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯
            logger.log('ğŸŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API Client Vakamova - Ù†Ø³Ø®Ù‡ Ù¾Ø§ÛŒÙ‡', 'success');
            logger.log('ğŸ› ï¸ Ø§ÛŒÙ† ØªØ³Øªâ€ŒÙ‡Ø§ Ø´Ø§Ù…Ù„ Mock Server Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª ØªÙ†Ø¸ÛŒÙ… Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ø§Ø³Øª', 'info');
            logger.log('ğŸ“± Ú©Ø§Ù…Ù„Ø§Ù‹ Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ Ù…ÙˆØ¨Ø§ÛŒÙ„ - ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯', 'info');
            
            // ØªÙ†Ø¸ÛŒÙ… Ø§ÙˆÙ„ÛŒÙ‡ Mock Server
            const api = new ApiClient();
            api.mockServer.updateControls();
        });

        // ========== Global Functions for Buttons ==========
        window.runAllTests = () => TestManager.runAllTests();
        window.clearTests = () => TestManager.clearTests();
        window.clearConsole = clearConsole;
        window.showTab = showTab;
    </script>
</body>
  </html>
