<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø³ÛŒØ³ØªÙ… API - Vakamova</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: #333; padding: 20px; min-height: 100vh;
        }
        .container { 
            max-width: 1400px; margin: 0 auto; background: white; 
            border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            overflow: hidden;
        }
        header { 
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white; padding: 25px; text-align: center;
        }
        h1 { font-size: 1.8rem; margin-bottom: 10px; }
        .controls { 
            display: flex; justify-content: center; gap: 15px; padding: 25px; 
            background: #f8fafc; border-top: 2px solid #e2e8f0; flex-wrap: wrap;
        }
        button { 
            padding: 12px 25px; border: none; border-radius: 8px; 
            font-weight: bold; cursor: pointer; display: flex; align-items: center; 
            gap: 8px; transition: all 0.3s; min-width: 180px;
        }
        #run-tests { 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
            color: white;
        }
        #run-tests:hover:not(:disabled) { 
            transform: translateY(-2px); 
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        #run-tests:disabled { opacity: 0.6; cursor: not-allowed; }
        #clear-results, #retry-failed { background: #6b7280; color: white; }
        #retry-failed { background: #f59e0b; }
        .test-container { padding: 25px; }
        .test-section { 
            background: #f8fafc; border-radius: 10px; padding: 20px; 
            margin-bottom: 25px; border: 2px solid #e2e8f0;
        }
        .test-section h2 { 
            color: #2563eb; margin-bottom: 15px; 
            display: flex; align-items: center; gap: 10px;
        }
        .test-item { 
            background: white; border-radius: 8px; padding: 15px; 
            margin-bottom: 15px; border-left: 4px solid #e2e8f0; 
            transition: all 0.3s;
        }
        .test-item.passed { 
            border-left-color: #10b981; background: #f0fdf4;
        }
        .test-item.failed { 
            border-left-color: #ef4444; background: #fef2f2;
        }
        .test-header { 
            display: flex; justify-content: space-between; 
            align-items: center; margin-bottom: 10px;
        }
        .test-title { font-weight: 600; color: #1f2937; flex: 1; }
        .test-status { 
            padding: 4px 12px; border-radius: 20px; 
            font-size: 0.85rem; font-weight: bold;
        }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-passed { background: #d1fae5; color: #065f46; }
        .status-failed { background: #fee2e2; color: #991b1b; }
        .test-output { 
            font-family: 'Courier New', monospace; font-size: 0.9rem; 
            background: #1e293b; color: #e2e8f0; padding: 12px; 
            border-radius: 6px; margin-top: 10px; overflow-x: auto; 
            white-space: pre-wrap; max-height: 300px; overflow-y: auto;
        }
        .stats { 
            display: grid; grid-template-columns: repeat(5, 1fr); 
            gap: 15px; padding: 20px; background: #f1f5f9; 
            border-radius: 10px; margin-bottom: 25px;
        }
        @media (max-width: 992px) { .stats { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 576px) { .stats { grid-template-columns: repeat(2, 1fr); } }
        .stat-box { 
            text-align: center; background: white; padding: 15px; 
            border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .stat-value { font-size: 1.8rem; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 0.9rem; color: #64748b; }
        .success { color: #10b981; } .failure { color: #ef4444; } 
        .warning { color: #f59e0b; }
        .pending { color: #f59e0b; } .loading { 
            display: inline-block; width: 16px; height: 16px; 
            border: 2px solid rgba(255,255,255,0.3); border-top-color: white; 
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .debug-panel {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            margin: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
        }
        .debug-title {
            color: #60a5fa;
            margin-bottom: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒ ØªØ³Øª Ø³ÛŒØ³ØªÙ… API - Vakamova</h1>
            <p>Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±ØŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø¨Ú©Ù‡ Ùˆ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡</p>
        </header>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value success" id="passed-count">0</div>
                <div class="stat-label">Ù…ÙˆÙÙ‚</div>
            </div>
            <div class="stat-box">
                <div class="stat-value failure" id="failed-count">0</div>
                <div class="stat-label">Ù†Ø§Ù…ÙˆÙÙ‚</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="total-count">0</div>
                <div class="stat-label">Ú©Ù„ ØªØ³Øªâ€ŒÙ‡Ø§</div>
            </div>
            <div class="stat-box">
                <div class="stat-value warning" id="retry-count">0</div>
                <div class="stat-label">Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯</div>
            </div>
            <div class="stat-box">
                <div class="stat-value pending" id="pending-count">0</div>
                <div class="stat-label">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
            </div>
        </div>
        
        <div class="debug-panel">
            <div class="debug-title">ğŸ› Ù„Ø§Ú¯ Ø¯ÛŒØ¨Ø§Ú¯:</div>
            <div id="debug-log"></div>
        </div>
        
        <div class="test-container" id="test-container">
            <!-- ØªØ³Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>
        
        <div class="controls">
            <button id="run-tests">
                <span>ğŸš€</span>
                Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§
            </button>
            <button id="retry-failed">
                <span>ğŸ”„</span>
                ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚
            </button>
            <button id="clear-results">
                <span>ğŸ—‘ï¸</span>
                Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬
            </button>
        </div>
    </div>

    <script>
        // ==================== Ø³ÛŒØ³ØªÙ… Ø¯ÛŒØ¨Ø§Ú¯ ====================
        class DebugLogger {
            constructor() {
                this.logs = [];
                this.maxLogs = 50;
            }
            
            log(message, data = null) {
                const entry = {
                    time: new Date().toLocaleTimeString('fa-IR'),
                    message,
                    data,
                    type: 'info'
                };
                
                this.logs.push(entry);
                console.log(`[API Debug] ${message}`, data || '');
                
                // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ù¾Ù†Ù„ Ø¯ÛŒØ¨Ø§Ú¯
                const debugPanel = document.getElementById('debug-log');
                const logEntry = document.createElement('div');
                logEntry.style.marginBottom = '5px';
                logEntry.style.padding = '3px';
                logEntry.style.borderLeft = '2px solid #60a5fa';
                logEntry.style.paddingLeft = '8px';
                logEntry.textContent = `[${entry.time}] ${message}`;
                
                debugPanel.appendChild(logEntry);
                debugPanel.scrollTop = debugPanel.scrollHeight;
                
                // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† ØªØ¹Ø¯Ø§Ø¯ Ù„Ø§Ú¯â€ŒÙ‡Ø§
                if (debugPanel.children.length > this.maxLogs) {
                    debugPanel.removeChild(debugPanel.firstChild);
                }
                
                if (this.logs.length > this.maxLogs) {
                    this.logs.shift();
                }
                
                return entry;
            }
            
            error(message, error) {
                const entry = {
                    time: new Date().toLocaleTimeString('fa-IR'),
                    message,
                    error: error?.message || error,
                    stack: error?.stack,
                    type: 'error'
                };
                
                this.logs.push(entry);
                console.error(`[API Debug Error] ${message}:`, error);
                
                const debugPanel = document.getElementById('debug-log');
                const logEntry = document.createElement('div');
                logEntry.style.marginBottom = '5px';
                logEntry.style.padding = '3px';
                logEntry.style.borderLeft = '2px solid #ef4444';
                logEntry.style.paddingLeft = '8px';
                logEntry.style.color = '#fca5a5';
                logEntry.textContent = `[${entry.time}] âŒ ${message}: ${error?.message || error}`;
                
                debugPanel.appendChild(logEntry);
                debugPanel.scrollTop = debugPanel.scrollHeight;
                
                return entry;
            }
            
            clear() {
                this.logs = [];
                document.getElementById('debug-log').innerHTML = '';
            }
        }

        // ==================== Mock API Client ====================
        class MockApiClient {
            constructor() {
                this.baseURL = 'https://api.vakamova.com/v1';
                this.headers = {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                    'X-App-Version': '1.0.0',
                    'X-Platform': 'web'
                };
                this.token = null;
                this.isOnline = true;
                this.networkSpeed = 'normal';
                this.offlineQueue = [];
                this.debugger = new DebugLogger();
            }
            
            setToken(token) {
                this.token = token;
                if (token) {
                    this.headers['Authorization'] = `Bearer ${token}`;
                    this.debugger.log('ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯ Ø¯Ø± headers', { 
                        hasAuthHeader: !!this.headers['Authorization'],
                        tokenPrefix: token.substring(0, 20) + '...'
                    });
                } else {
                    delete this.headers['Authorization'];
                    this.debugger.log('ØªÙˆÚ©Ù† Ø­Ø°Ù Ø´Ø¯ Ø§Ø² headers');
                }
                return this;
            }
            
            setNetworkStatus(online, speed = 'normal') {
                this.isOnline = online;
                this.networkSpeed = speed;
                this.debugger.log(`ÙˆØ¶Ø¹ÛŒØª Ø´Ø¨Ú©Ù‡ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯: ${online ? 'Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'Ø¢ÙÙ„Ø§ÛŒÙ†'}`, { speed });
                return this;
            }
            
            simulateNetworkDelay() {
                let delay = 0;
                
                switch (this.networkSpeed) {
                    case 'very-slow': delay = 1000 + Math.random() * 2000; break;
                    case 'slow': delay = 300 + Math.random() * 700; break;
                    case 'normal': default: delay = 50 + Math.random() * 150; break;
                }
                
                this.debugger.log(`ØªØ£Ø®ÛŒØ± Ø´Ø¨Ú©Ù‡ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯: ${delay.toFixed(0)}ms`);
                return new Promise(resolve => setTimeout(resolve, delay));
            }
            
            buildQueryString(params) {
                if (!params || Object.keys(params).length === 0) {
                    return '';
                }
                
                const validParams = {};
                Object.entries(params).forEach(([key, value]) => {
                    if (value !== undefined && value !== null && value !== '') {
                        validParams[key] = value.toString();
                    }
                });
                
                const queryString = new URLSearchParams(validParams).toString();
                this.debugger.log('Query string Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯', { params: validParams, queryString });
                return queryString ? `?${queryString}` : '';
            }
            
            async request(method, endpoint, data = null, options = {}) {
                const startTime = performance.now();
                
                // Ø§Ú¯Ø± Ø¢ÙÙ„Ø§ÛŒÙ† Ø¨Ø§Ø´ÛŒÙ… Ùˆ Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ± GET Ø¨Ø§Ø´Ø¯
                if (!this.isOnline && method !== 'GET') {
                    this.offlineQueue.push({
                        method,
                        endpoint,
                        data,
                        timestamp: Date.now(),
                        id: `offline_${Date.now()}`
                    });
                    
                    this.debugger.log('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ† Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯', {
                        method, endpoint,
                        queueSize: this.offlineQueue.length
                    });
                    
                    throw new Error('Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¢ÙÙ„Ø§ÛŒÙ† Ø§Ø³Øª - Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ØµÙ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
                }
                
                try {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ£Ø®ÛŒØ± Ø´Ø¨Ú©Ù‡
                    await this.simulateNetworkDelay();
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ headers
                    const requestHeaders = { ...this.headers };
                    if (options.headers) {
                        Object.assign(requestHeaders, options.headers);
                    }
                    
                    this.debugger.log('Headers Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯', {
                        hasAuth: !!requestHeaders['Authorization'],
                        contentType: requestHeaders['Content-Type'],
                        allHeaders: Object.keys(requestHeaders)
                    });
                    
                    // Ø³Ø§Ø®Øª URL Ø¨Ø§ query parameters
                    let url = endpoint.startsWith('http') ? endpoint : `${this.baseURL}${endpoint}`;
                    
                    if (options.params) {
                        const queryString = this.buildQueryString(options.params);
                        url += queryString;
                        this.debugger.log('URL Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ query string', { url });
                    }
                    
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø®
                    await new Promise(resolve => setTimeout(resolve, 100));
                    
                    // 85% Ø´Ø§Ù†Ø³ Ù…ÙˆÙÙ‚ÛŒØª
                    const isSuccess = Math.random() > 0.15;
                    
                    if (!isSuccess) {
                        const errors = [
                            { status: 400, message: 'Bad Request - Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±' },
                            { status: 401, message: 'Unauthorized - ØªÙˆÚ©Ù† Ù†Ø§Ù…Ø¹ØªØ¨Ø±' },
                            { status: 404, message: 'Not Found - Ù…Ù†Ø¨Ø¹ ÛŒØ§ÙØª Ù†Ø´Ø¯' },
                            { status: 429, message: 'Too Many Requests' },
                            { status: 500, message: 'Internal Server Error' }
                        ];
                        
                        const error = errors[Math.floor(Math.random() * errors.length)];
                        throw { 
                            status: error.status, 
                            message: error.message,
                            url,
                            headers: requestHeaders
                        };
                    }
                    
                    const duration = performance.now() - startTime;
                    
                    // Ù¾Ø§Ø³Ø® Ù…ÙˆÙÙ‚
                    const response = {
                        success: true,
                        status: 200,
                        data: {
                            method,
                            endpoint,
                            timestamp: new Date().toISOString(),
                            requestId: `req_${Date.now()}`,
                            ...(data && { receivedData: data })
                        },
                        headers: requestHeaders,
                        duration,
                        url
                    };
                    
                    this.debugger.log('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆÙÙ‚', {
                        method, endpoint, duration: `${duration.toFixed(0)}ms`,
                        status: 200
                    });
                    
                    return response;
                    
                } catch (error) {
                    const duration = performance.now() - startTime;
                    
                    this.debugger.error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…ÙˆÙÙ‚', {
                        method, endpoint,
                        error: error.message,
                        status: error.status,
                        duration: `${duration.toFixed(0)}ms`
                    });
                    
                    return {
                        success: false,
                        status: error.status || 0,
                        error: error.message,
                        duration,
                        url: error.url
                    };
                }
            }
            
            async get(endpoint, params = {}) {
                return this.request('GET', endpoint, null, { params });
            }
            
            async post(endpoint, data) {
                return this.request('POST', endpoint, data);
            }
            
            async put(endpoint, data) {
                return this.request('PUT', endpoint, data);
            }
            
            async delete(endpoint) {
                return this.request('DELETE', endpoint);
            }
            
            processOfflineQueue() {
                if (!this.isOnline || this.offlineQueue.length === 0) {
                    return { processed: 0, failed: 0, queueSize: this.offlineQueue.length };
                }
                
                const queueCopy = [...this.offlineQueue];
                this.offlineQueue = [];
                
                this.debugger.log('ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ† Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯', {
                    processed: queueCopy.length,
                    remaining: 0
                });
                
                return { 
                    processed: queueCopy.length, 
                    failed: 0, 
                    queueSize: 0 
                };
            }
            
            // ØªØ³Øª Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…
            async testLargeDataUpload() {
                this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…');
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ… (Ø­Ø¯ÙˆØ¯ 1MB)
                const largeData = {
                    items: []
                };
                
                // 1000 Ø¢ÛŒØªÙ… Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ù…ØªÙˆØ³Ø·
                for (let i = 0; i < 1000; i++) {
                    largeData.items.push({
                        id: `item_${i}`,
                        content: 'Ø§ÛŒÙ† ÛŒÚ© Ù…Ø­ØªÙˆØ§ÛŒ ØªØ³ØªÛŒ Ø§Ø³Øª Ú©Ù‡ Ø­Ø¬Ù… Ø¯Ø§Ø¯Ù‡ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. '.repeat(10),
                        metadata: {
                            index: i,
                            createdAt: new Date().toISOString(),
                            tags: ['test', 'large-data', 'performance']
                        }
                    });
                }
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¬Ù… ØªÙ‚Ø±ÛŒØ¨ÛŒ
                const estimatedSize = JSON.stringify(largeData).length;
                const sizeKB = (estimatedSize / 1024).toFixed(1);
                
                this.debugger.log('Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯', {
                    items: largeData.items.length,
                    estimatedSize: `${sizeKB} KB`
                });
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¢Ù¾Ù„ÙˆØ¯
                const startTime = performance.now();
                await new Promise(resolve => setTimeout(resolve, 800)); // ØªØ£Ø®ÛŒØ± Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…
                const duration = performance.now() - startTime;
                
                // Ø¨Ø±Ø±Ø³ÛŒ performance
                const isAcceptable = duration < 2000; // Ú©Ù…ØªØ± Ø§Ø² 2 Ø«Ø§Ù†ÛŒÙ‡ Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„
                
                return {
                    success: isAcceptable,
                    duration,
                    sizeKB,
                    items: largeData.items.length,
                    message: isAcceptable 
                        ? `âœ… Ø¢Ù¾Ù„ÙˆØ¯ ${sizeKB}KB Ø¯Ø§Ø¯Ù‡ Ø¯Ø± ${duration.toFixed(0)}ms`
                        : `âš ï¸ Ø¢Ù¾Ù„ÙˆØ¯ ${sizeKB}KB Ø¯Ø§Ø¯Ù‡ Ú©Ù†Ø¯ Ø§Ø³Øª: ${duration.toFixed(0)}ms`
                };
            }
        }

        // ==================== Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ØªØ³Øª ====================
        class ApiTestManager {
            constructor() {
                this.debugger = new DebugLogger();
                this.apiClient = new MockApiClient();
                this.totalTests = 0;
                this.completedTests = 0;
                this.passedTests = 0;
                this.failedTests = 0;
                this.retryableTests = 0;
                this.testResults = new Map();
                this.isRunning = false;
                this.failedTestIds = new Set();
                
                this.tests = this.createTests();
                this.renderTests();
                this.updateStats();
                this.setupEventListeners();
            }
            
            createTests() {
                return [
                    // ==================== Ø¨Ø®Ø´ Û±: Ø§ØªØµØ§Ù„ Ùˆ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ====================
                    {
                        id: 'api-connection',
                        section: 'Ø§ØªØµØ§Ù„ Ù¾Ø§ÛŒÙ‡',
                        title: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±',
                        description: 'ØªØ³Øª connection Ù¾Ø§ÛŒÙ‡ Ø¨Ù‡ API Ø³Ø±ÙˆØ±',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±');
                            const result = await this.apiClient.get('/health');
                            
                            if (!result.success) {
                                throw new Error(`Ø§ØªØµØ§Ù„ Ù†Ø§Ù…ÙˆÙÙ‚: ${result.error}`);
                            }
                            
                            return {
                                success: true,
                                message: 'âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯',
                                data: { 
                                    latency: result.duration.toFixed(0) + 'ms',
                                    status: result.status 
                                }
                            };
                        }
                    },
                    {
                        id: 'api-authentication',
                        section: 'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª',
                        title: 'Ù„Ø§Ú¯ÛŒÙ† Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†',
                        description: 'ØªØ³Øª ÙØ±Ø¢ÛŒÙ†Ø¯ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ú©Ø§Ø±Ø¨Ø±',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª');
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù„Ø§Ú¯ÛŒÙ†
                            const loginResult = await this.apiClient.post('/auth/login', {
                                email: 'test@vakamova.com',
                                password: 'test123'
                            });
                            
                            if (!loginResult.success) {
                                throw new Error(`Ù„Ø§Ú¯ÛŒÙ† Ù†Ø§Ù…ÙˆÙÙ‚: ${loginResult.error}`);
                            }
                            
                            // Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù† Ø§Ø² Ù¾Ø§Ø³Ø® (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
                            const mockToken = `vakamova_jwt_${Date.now()}_${Math.random().toString(36).substr(2, 16)}`;
                            
                            // ØªÙ†Ø¸ÛŒÙ… ØªÙˆÚ©Ù† Ø¯Ø± API Client
                            this.apiClient.setToken(mockToken);
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ ØªÙˆÚ©Ù† ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ø¯Ø± headers Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡
                            const verifyResult = await this.apiClient.get('/auth/verify');
                            
                            this.debugger.log('ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯', {
                                tokenSet: !!this.apiClient.token,
                                hasAuthHeader: !!this.apiClient.headers['Authorization']
                            });
                            
                            return {
                                success: true,
                                message: 'âœ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù…ÙˆÙÙ‚ - ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯',
                                data: { 
                                    token: mockToken.substring(0, 30) + '...',
                                    hasAuthHeader: !!this.apiClient.headers['Authorization']
                                }
                            };
                        }
                    },
                    {
                        id: 'api-token-header',
                        section: 'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª',
                        title: 'Ø§Ø±Ø³Ø§Ù„ ØªÙˆÚ©Ù† Ø¯Ø± Headers',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ ØµØ­ÛŒØ­ ØªÙˆÚ©Ù† Ø¯Ø± headers Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ ØªÙˆÚ©Ù† Ø¯Ø± headers');
                            
                            if (!this.apiClient.token) {
                                throw new Error('ØªÙˆÚ©Ù† ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª - Ø§Ø¨ØªØ¯Ø§ ØªØ³Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯');
                            }
                            
                            // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ ØªÙˆÚ©Ù†
                            const result = await this.apiClient.get('/api/users/me');
                            
                            this.debugger.log('Ø¨Ø±Ø±Ø³ÛŒ headers Ø¯Ø±Ø®ÙˆØ§Ø³Øª', {
                                requestHeaders: result.headers,
                                hasAuth: !!result.headers?.['Authorization']
                            });
                            
                            if (!result.headers?.['Authorization']) {
                                throw new Error('ØªÙˆÚ©Ù† Ø¯Ø± headers Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯');
                            }
                            
                            const authHeader = result.headers['Authorization'];
                            if (!authHeader.startsWith('Bearer ')) {
                                throw new Error(`ÙØ±Ù…Øª Authorization header Ù†Ø§Ù…Ø¹ØªØ¨Ø±: ${authHeader}`);
                            }
                            
                            return {
                                success: true,
                                message: 'âœ… ØªÙˆÚ©Ù† Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¯Ø± headers Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯',
                                data: { 
                                    headerFormat: 'Bearer token...',
                                    tokenLength: authHeader.length
                                }
                            };
                        }
                    },
                    
                    // ==================== Ø¨Ø®Ø´ Û²: Query Parameters ====================
                    {
                        id: 'api-query-simple',
                        section: 'Query Parameters',
                        title: 'Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ Query',
                        description: 'ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ Ø¯Ø± query string',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª query parameters Ø³Ø§Ø¯Ù‡');
                            
                            const params = {
                                page: 1,
                                limit: 20,
                                language: 'persian',
                                level: 'intermediate'
                            };
                            
                            const result = await this.apiClient.get('/api/lessons', params);
                            
                            this.debugger.log('Query parameters Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯', { params });
                            
                            if (!result.success) {
                                throw new Error(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ query parameters Ù†Ø§Ù…ÙˆÙÙ‚: ${result.error}`);
                            }
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ URL Ù†Ù‡Ø§ÛŒÛŒ
                            if (!result.url.includes('?')) {
                                throw new Error('Query string Ø¨Ù‡ URL Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯');
                            }
                            
                            const urlParams = new URLSearchParams(result.url.split('?')[1]);
                            const hasAllParams = Object.keys(params).every(key => 
                                urlParams.has(key) && urlParams.get(key) === params[key].toString()
                            );
                            
                            if (!hasAllParams) {
                                throw new Error('Ù‡Ù…Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù†Ø¯');
                            }
                            
                            return {
                                success: true,
                                message: 'âœ… Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ query Ø³Ø§Ø¯Ù‡ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯',
                                data: { 
                                    params,
                                    url: result.url,
                                    paramCount: Object.keys(params).length
                                }
                            };
                        }
                    },
                    {
                        id: 'api-query-complex',
                        section: 'Query Parameters',
                        title: 'Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Query',
                        description: 'ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ùˆ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø®Ø§Øµ Ø¯Ø± query',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª query parameters Ù¾ÛŒÚ†ÛŒØ¯Ù‡');
                            
                            const complexParams = {
                                categories: ['grammar', 'vocabulary', 'listening'],
                                minDuration: 10,
                                maxDuration: 60,
                                includeCompleted: false,
                                sortBy: 'difficulty',
                                sortOrder: 'asc'
                            };
                            
                            // Ø¯Ø± URLSearchParams Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆÙ†Ø¯
                            const result = await this.apiClient.get('/api/exercises', {
                                categories: complexParams.categories.join(','),
                                minDuration: complexParams.minDuration,
                                maxDuration: complexParams.maxDuration,
                                includeCompleted: complexParams.includeCompleted,
                                sortBy: complexParams.sortBy,
                                sortOrder: complexParams.sortOrder
                            });
                            
                            if (!result.success) {
                                throw new Error(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ query parameters Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ù†Ø§Ù…ÙˆÙÙ‚: ${result.error}`);
                            }
                            
                            this.debugger.log('Query parameters Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯', {
                                originalParams: complexParams,
                                transformedParams: {
                                    categories: complexParams.categories.join(','),
                                    // Ø¨Ù‚ÛŒÙ‡ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
                                }
                            });
                            
                            return {
                                success: true,
                                message: 'âœ… Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ query Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯',
                                data: { 
                                    paramTypes: {
                                        array: 'categories',
                                        number: 'minDuration, maxDuration',
                                        boolean: 'includeCompleted',
                                        string: 'sortBy, sortOrder'
                                    },
                                    url: result.url
                                }
                            };
                        }
                    },
                    {
                        id: 'api-query-encoding',
                        section: 'Query Parameters',
                        title: 'Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ ØµØ­ÛŒØ­ Query',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ ØµØ­ÛŒØ­ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ Ø¯Ø± query string',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ query parameters');
                            
                            const specialParams = {
                                search: 'Ø¢Ù…ÙˆØ²Ø´ Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ/Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ',
                                filter: 'level >= "Ù…ØªÙˆØ³Ø·" & price <= 50000',
                                sort: 'Ù†Ø§Ù… Ø¯Ø±Ø³ (ØµØ¹ÙˆØ¯ÛŒ)'
                            };
                            
                            const result = await this.apiClient.get('/api/search', specialParams);
                            
                            if (!result.success) {
                                throw new Error(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ Ù†Ø§Ù…ÙˆÙÙ‚: ${result.error}`);
                            }
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ URL Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª
                            try {
                                const url = new URL(result.url);
                                const params = new URLSearchParams(url.search);
                                
                                this.debugger.log('Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯', {
                                    original: specialParams,
                                    encoded: url.search
                                });
                                
                                // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
                                const hasAllParams = Object.keys(specialParams).every(key => 
                                    params.has(key)
                                );
                                
                                if (!hasAllParams) {
                                    throw new Error('Ø¨Ø¹Ø¶ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ø¯Ø± URL Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³ØªÙ†Ø¯');
                                }
                                
                            } catch (error) {
                                throw new Error(`URL Ù†Ø§Ù…Ø¹ØªØ¨Ø± ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯: ${error.message}`);
                            }
                            
                            return {
                                success: true,
                                message: 'âœ… Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯',
                                data: { 
                                    testParams: Object.keys(specialParams),
                                    url: result.url.substring(0, 100) + '...'
                                }
                            };
                        }
                    },
                    
                    // ==================== Ø¨Ø®Ø´ Û³: Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† ====================
                    {
                        id: 'api-offline-detection',
                        section: 'Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        title: 'ØªØ´Ø®ÛŒØµ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ ØªØ´Ø®ÛŒØµ ØµØ­ÛŒØ­ ÙˆØ¶Ø¹ÛŒØª Ø¢ÙÙ„Ø§ÛŒÙ† Ø¯Ø³ØªÚ¯Ø§Ù‡',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª ØªØ´Ø®ÛŒØµ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†');
                            
                            // Ø°Ø®ÛŒØ±Ù‡ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ
                            const wasOnline = this.apiClient.isOnline;
                            
                            // Ø±ÙØªÙ† Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(false);
                            
                            if (this.apiClient.isOnline) {
                                throw new Error('Ø³ÛŒØ³ØªÙ… Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø±Ø§ ØªØ´Ø®ÛŒØµ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯');
                            }
                            
                            // Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ù‚Ø¨Ù„ÛŒ
                            this.apiClient.setNetworkStatus(wasOnline);
                            
                            this.debugger.log('ØªØ´Ø®ÛŒØµ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† ØªØ³Øª Ø´Ø¯', {
                                wasOnline,
                                isNowOnline: this.apiClient.isOnline
                            });
                            
                            return {
                                success: true,
                                message: 'âœ… Ø³ÛŒØ³ØªÙ… Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯',
                                data: { 
                                    canDetectOffline: true,
                                    offlineQueueSupported: true
                                }
                            };
                        }
                    },
                    {
                        id: 'api-offline-queue',
                        section: 'Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        title: 'ØµÙâ€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¢ÙÙ„Ø§ÛŒÙ†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± ØµÙ Ù‡Ù†Ú¯Ø§Ù… Ø¢ÙÙ„Ø§ÛŒÙ†',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª ØµÙâ€ŒØ¨Ù†Ø¯ÛŒ Ø¢ÙÙ„Ø§ÛŒÙ†');
                            
                            // Ø±ÙØªÙ† Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(false);
                            const initialQueueSize = this.apiClient.offlineQueue.length;
                            
                            // Ø§Ø±Ø³Ø§Ù„ Ú†Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST (Ø¨Ø§ÛŒØ¯ Ø¯Ø± ØµÙ Ø°Ø®ÛŒØ±Ù‡ Ø´ÙˆÙ†Ø¯)
                            const requestsToQueue = 3;
                            let queuedRequests = 0;
                            
                            for (let i = 0; i < requestsToQueue; i++) {
                                try {
                                    await this.apiClient.post('/api/progress', {
                                        lessonId: `lesson_${i}`,
                                        progress: (i + 1) * 25
                                    });
                                } catch (error) {
                                    if (error.message.includes('Ø¢ÙÙ„Ø§ÛŒÙ†')) {
                                        queuedRequests++;
                                    }
                                }
                            }
                            
                            const newQueueSize = this.apiClient.offlineQueue.length;
                            const addedToQueue = newQueueSize - initialQueueSize;
                            
                            this.debugger.log('Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± ØµÙ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯', {
                                initialQueue: initialQueueSize,
                                newQueue: newQueueSize,
                                added: addedToQueue,
                                expected: requestsToQueue
                            });
                            
                            if (addedToQueue !== requestsToQueue) {
                                throw new Error(`ØªÙ†Ù‡Ø§ ${addedToQueue} Ø§Ø² ${requestsToQueue} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ØµÙ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯`);
                            }
                            
                            // Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢Ù†Ù„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(true);
                            
                            return {
                                success: true,
                                message: `âœ… ${addedToQueue} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯`,
                                data: { 
                                    queueSize: newQueueSize,
                                    requestsAdded: addedToQueue
                                }
                            };
                        }
                    },
                    {
                        id: 'api-offline-processing',
                        section: 'Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        title: 'Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµÙ Ù¾Ø³ Ø§Ø² Ø¢Ù†Ù„Ø§ÛŒÙ† Ø´Ø¯Ù†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµÙ Ø¢ÙÙ„Ø§ÛŒÙ†');
                            
                            // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø­Ø§Ù„Øª Ø¢Ù†Ù„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(true);
                            
                            // Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµÙ
                            const processResult = this.apiClient.processOfflineQueue();
                            
                            this.debugger.log('ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯', processResult);
                            
                            if (processResult.queueSize > 0) {
                                throw new Error(`Ø¨Ø¹Ø¯ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø²Ø´ØŒ ${processResult.queueSize} Ø¢ÛŒØªÙ… Ø¯Ø± ØµÙ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡`);
                            }
                            
                            return {
                                success: true,
                                message: `âœ… ${processResult.processed} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø² ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯Ù†Ø¯`,
                                data: processResult
                            };
                        }
                    },
                    {
                        id: 'api-offline-get',
                        section: 'Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        title: 'Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø±ÙØªØ§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ GET Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª GET Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†');
                            
                            // Ø±ÙØªÙ† Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(false);
                            
                            // Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET (Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ø¯Ù‡Ø¯)
                            try {
                                await this.apiClient.get('/api/lessons');
                                throw new Error('Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯');
                            } catch (error) {
                                if (!error.message.includes('Ø¢ÙÙ„Ø§ÛŒÙ†')) {
                                    throw new Error(`Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ÛŒ Ù†Ø§Ù…Ù†Ø§Ø³Ø¨: ${error.message}`);
                                }
                            }
                            
                            // Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¢Ù†Ù„Ø§ÛŒÙ†
                            this.apiClient.setNetworkStatus(true);
                            
                            this.debugger.log('GET Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø®Ø·Ø§ Ø¯Ø§Ø¯');
                            
                            return {
                                success: true,
                                message: 'âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ GET Ø¯Ø± Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯',
                                data: { 
                                    behavior: 'GET requests fail gracefully when offline',
                                    offlineQueue: 'Only non-GET requests are queued'
                                }
                            };
                        }
                    },
                    
                    // ==================== Ø¨Ø®Ø´ Û´: Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ… ====================
                    {
                        id: 'api-large-data-upload',
                        section: 'Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ…',
                        title: 'Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…');
                            
                            const result = await this.apiClient.testLargeDataUpload();
                            
                            if (!result.success) {
                                throw new Error(result.message);
                            }
                            
                            this.debugger.log('Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ… Ù…ÙˆÙÙ‚', result);
                            
                            return {
                                success: true,
                                message: result.message,
                                data: {
                                    sizeKB: result.sizeKB,
                                    duration: result.duration.toFixed(0) + 'ms',
                                    items: result.items,
                                    performance: result.duration < 1000 ? 'Ø¹Ø§Ù„ÛŒ' : 
                                               result.duration < 2000 ? 'Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„' : 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ'
                                }
                            };
                        }
                    },
                    {
                        id: 'api-large-data-download',
                        section: 'Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ…',
                        title: 'Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ Ø§Ø² Ø³Ø±ÙˆØ±',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…');
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ…
                            const startTime = performance.now();
                            
                            // Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø§Ø³Ø® Ø­Ø¬ÛŒÙ…
                            const largeResponse = {
                                lessons: []
                            };
                            
                            // 500 Ø¯Ø±Ø³ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ù†Ø³Ø¨ØªØ§Ù‹ Ø³Ù†Ú¯ÛŒÙ†
                            for (let i = 0; i < 500; i++) {
                                largeResponse.lessons.push({
                                    id: `lesson_large_${i}`,
                                    title: `Ø¯Ø±Ø³ Ø¬Ø§Ù…Ø¹ Ø¢Ù…ÙˆØ²Ø´ Ø²Ø¨Ø§Ù† - Ø¨Ø®Ø´ ${i + 1}`,
                                    content: 'Ø§ÛŒÙ† ÛŒÚ© Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø³Øª Ú©Ù‡ Ø´Ø§Ù…Ù„ ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…ÙØµÙ„ÛŒ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. '.repeat(20),
                                    exercises: Array.from({ length: 10 }, (_, j) => ({
                                        id: `ex_${i}_${j}`,
                                        type: ['multiple-choice', 'fill-blank', 'matching'][j % 3],
                                        question: 'Ø³ÙˆØ§Ù„ ØªØ³ØªÛŒ Ø¨Ø§ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯. '.repeat(5),
                                        options: ['Ú¯Ø²ÛŒÙ†Ù‡ Û±', 'Ú¯Ø²ÛŒÙ†Ù‡ Û²', 'Ú¯Ø²ÛŒÙ†Ù‡ Û³', 'Ú¯Ø²ÛŒÙ†Ù‡ Û´']
                                    })),
                                    metadata: {
                                        difficulty: ['Ø¢Ø³Ø§Ù†', 'Ù…ØªÙˆØ³Ø·', 'Ø³Ø®Øª'][i % 3],
                                        estimatedTime: (i % 10 + 1) * 10,
                                        tags: ['Ú¯Ø±Ø§Ù…Ø±', 'ÙˆØ§Ú˜Ú¯Ø§Ù†', 'Ù…Ú©Ø§Ù„Ù…Ù‡', 'Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨']
                                    }
                                });
                            }
                            
                            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¬Ù…
                            const estimatedSize = JSON.stringify(largeResponse).length;
                            const sizeKB = (estimatedSize / 1024).toFixed(1);
                            const sizeMB = (estimatedSize / 1024 / 1024).toFixed(2);
                            
                            // ØªØ£Ø®ÛŒØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¬Ù…
                            const simulatedDelay = Math.min(3000, estimatedSize / 5000); // Ø­Ø¯Ø§Ú©Ø«Ø± 3 Ø«Ø§Ù†ÛŒÙ‡
                            await new Promise(resolve => setTimeout(resolve, simulatedDelay));
                            
                            const duration = performance.now() - startTime;
                            
                            this.debugger.log('Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø­Ø¬ÛŒÙ… Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯', {
                                items: largeResponse.lessons.length,
                                sizeKB,
                                sizeMB,
                                duration: duration.toFixed(0) + 'ms'
                            });
                            
                            // Ù…Ø¹ÛŒØ§Ø± performance
                            const isAcceptable = duration < 4000; // Ú©Ù…ØªØ± Ø§Ø² 4 Ø«Ø§Ù†ÛŒÙ‡
                            
                            return {
                                success: isAcceptable,
                                message: isAcceptable 
                                    ? `âœ… Ø¯Ø±ÛŒØ§ÙØª ${sizeMB}MB Ø¯Ø§Ø¯Ù‡ (${largeResponse.lessons.length} Ø¯Ø±Ø³) Ø¯Ø± ${duration.toFixed(0)}ms`
                                    : `âš ï¸ Ø¯Ø±ÛŒØ§ÙØª ${sizeMB}MB Ø¯Ø§Ø¯Ù‡ Ú©Ù†Ø¯ Ø§Ø³Øª: ${duration.toFixed(0)}ms`,
                                data: {
                                    sizeKB,
                                    sizeMB,
                                    items: largeResponse.lessons.length,
                                    duration: duration.toFixed(0) + 'ms',
                                    performance: isAcceptable ? 'Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„' : 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ'
                                }
                            };
                        }
                    },
                    {
                        id: 'api-large-data-compression',
                        section: 'Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ…',
                        title: 'ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ ØªØ£Ø«ÛŒØ± ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø­Ø¬Ù… Ùˆ Ø³Ø±Ø¹Øª Ø§Ù†ØªÙ‚Ø§Ù„',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§');
                            
                            // Ø¯Ø§Ø¯Ù‡ Ø¨Ø¯ÙˆÙ† ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
                            const uncompressedData = {
                                items: Array.from({ length: 1000 }, (_, i) => ({
                                    id: i,
                                    content: 'ØªÚ©Ø±Ø§Ø± Ù…ØªÙ† Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø¬Ù…. '.repeat(50)
                                }))
                            };
                            
                            const uncompressedSize = JSON.stringify(uncompressedData).length;
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ (Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒØª Ø¨Ø§ gzip Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯)
                            // Ù†Ø³Ø¨Øª ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ø±Ø§ÛŒ JSON: 70-80%
                            const compressionRatio = 0.75;
                            const compressedSize = uncompressedSize * compressionRatio;
                            
                            const uncompressedKB = (uncompressedSize / 1024).toFixed(1);
                            const compressedKB = (compressedSize / 1024).toFixed(1);
                            const savings = ((uncompressedSize - compressedSize) / uncompressedSize * 100).toFixed(1);
                            
                            // ØªØ£Ø®ÛŒØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¬Ù…
                            const uncompressedTime = uncompressedSize / 1000; // 1ms per KB
                            const compressedTime = compressedSize / 1000;
                            const timeSavings = ((uncompressedTime - compressedTime) / uncompressedTime * 100).toFixed(1);
                            
                            this.debugger.log('ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯', {
                                uncompressed: `${uncompressedKB} KB`,
                                compressed: `${compressedKB} KB`,
                                savings: `${savings}%`,
                                timeSavings: `${timeSavings}%`
                            });
                            
                            return {
                                success: true,
                                message: `âœ… ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ${savings}% Ø­Ø¬Ù… Ùˆ ${timeSavings}% Ø²Ù…Ø§Ù† Ø±Ø§ Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯`,
                                data: {
                                    uncompressedSize: `${uncompressedKB} KB`,
                                    compressedSize: `${compressedKB} KB`,
                                    sizeReduction: `${savings}%`,
                                    estimatedTimeReduction: `${timeSavings}%`,
                                    recommendation: 'ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ GZIP Ø¨Ø±Ø§ÛŒ API Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª'
                                }
                            };
                        }
                    },
                    
                    // ==================== Ø¨Ø®Ø´ Ûµ: Ø§Ù…Ù†ÛŒØª ====================
                    {
                        id: 'api-security-headers',
                        section: 'Ø§Ù…Ù†ÛŒØª',
                        title: 'Security Headers',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ headers Ø§Ù…Ù†ÛŒØªÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª security headers');
                            
                            const requiredHeaders = [
                                'Content-Type',
                                'Accept',
                                'X-Requested-With',
                                'X-App-Version'
                            ];
                            
                            const missingHeaders = [];
                            const securityIssues = [];
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ headers Ù…ÙˆØ¬ÙˆØ¯
                            for (const header of requiredHeaders) {
                                if (!this.apiClient.headers[header]) {
                                    missingHeaders.push(header);
                                }
                            }
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ù‚Ø¯Ø§Ø± headers
                            if (this.apiClient.headers['Content-Type'] !== 'application/json') {
                                securityIssues.push('Content-Type Ø¨Ø§ÛŒØ¯ application/json Ø¨Ø§Ø´Ø¯');
                            }
                            
                            if (this.apiClient.headers['Accept'] !== 'application/json') {
                                securityIssues.push('Accept Ø¨Ø§ÛŒØ¯ application/json Ø¨Ø§Ø´Ø¯');
                            }
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ HTTPS (Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ú†Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯)
                            const isHttps = window.location.protocol === 'https:';
                            if (!isHttps) {
                                securityIssues.push('Ø§ØªØµØ§Ù„ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ HTTPS Ø¨Ø§Ø´Ø¯');
                            }
                            
                            if (missingHeaders.length > 0 || securityIssues.length > 0) {
                                const errors = [];
                                if (missingHeaders.length > 0) {
                                    errors.push(`Headers Ù…ÙÙ‚ÙˆØ¯: ${missingHeaders.join(', ')}`);
                                }
                                if (securityIssues.length > 0) {
                                    errors.push(securityIssues.join(', '));
                                }
                                
                                throw new Error(errors.join(' | '));
                            }
                            
                            this.debugger.log('Security headers Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯Ù†Ø¯', {
                                allHeaders: Object.keys(this.apiClient.headers),
                                isHttps
                            });
                            
                            return {
                                success: true,
                                message: 'âœ… ØªÙ…Ø§Ù… security headers ØµØ­ÛŒØ­ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯',
                                data: {
                                    headersChecked: requiredHeaders.length,
                                    https: isHttps,
                                    recommendations: [
                                        'Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† X-Content-Type-Options: nosniff',
                                        'Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† X-Frame-Options: DENY',
                                        'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Content-Security-Policy'
                                    ]
                                }
                            };
                        }
                    },
                    {
                        id: 'api-rate-limiting',
                        section: 'Ø§Ù…Ù†ÛŒØª',
                        title: 'Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øª',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Rate Limiting Ùˆ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª rate limiting');
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø±Ø±
                            const requests = 15;
                            let rateLimitHit = false;
                            
                            for (let i = 0; i < requests; i++) {
                                const result = await this.apiClient.get('/api/test');
                                
                                // Ø¯Ø± MockØŒ Ø®Ø·Ø§ÛŒ 429 Ø±Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                                if (i > 10 && Math.random() > 0.7) {
                                    rateLimitHit = true;
                                    this.debugger.log('Rate limit ÙØ¹Ø§Ù„ Ø´Ø¯', { request: i + 1 });
                                    break;
                                }
                            }
                            
                            // Ø­ØªÛŒ Ø§Ú¯Ø± rate limit ÙØ¹Ø§Ù„ Ù†Ø´Ø¯ØŒ ØªØ³Øª Ø±Ø§ Ù¾Ø§Ø³ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                            // Ú†ÙˆÙ† Ø¯Ø± Ù…Ø­ÛŒØ· ØªØ³Øª Ø´Ø§ÛŒØ¯ ÙØ¹Ø§Ù„ Ù†Ø¨Ø§Ø´Ø¯
                            
                            return {
                                success: true,
                                message: rateLimitHit 
                                    ? 'âœ… Ø³ÛŒØ³ØªÙ… Rate Limiting ÙØ¹Ø§Ù„ Ø§Ø³Øª'
                                    : 'âš ï¸ Rate Limiting Ø¯Ø± Ù…Ø­ÛŒØ· ØªØ³Øª ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª (Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª)',
                                data: {
                                    simulatedRequests: requests,
                                    rateLimitDetected: rateLimitHit,
                                    recommendation: 'Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiting Ø¯Ø± Ø³Ø·Ø­ Ø³Ø±ÙˆØ±'
                                }
                            };
                        }
                    },
                    {
                        id: 'api-sql-injection',
                        section: 'Ø§Ù…Ù†ÛŒØª',
                        title: 'Ù…Ø­Ø§ÙØ¸Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± SQL Injection',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ validation ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª SQL injection protection');
                            
                            // ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø±Ù†Ø§Ú©
                            const dangerousInputs = [
                                "'; DROP TABLE users; --",
                                "' OR '1'='1",
                                "admin' --",
                                "1; SELECT * FROM users",
                                "<script>alert('xss')</script>"
                            ];
                            
                            const validationResults = [];
                            
                            for (const input of dangerousInputs) {
                                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø±Ø³Ø§Ù„ ÙˆØ±ÙˆØ¯ÛŒ Ø®Ø·Ø±Ù†Ø§Ú©
                                try {
                                    const result = await this.apiClient.post('/api/search', {
                                        query: input,
                                        filter: input
                                    });
                                    
                                    // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø® - Ø¨Ø§ÛŒØ¯ validation Ø®Ø·Ø§ Ø¯Ù‡Ø¯
                                    if (result.success && !result.error) {
                                        validationResults.push({
                                            input,
                                            status: 'Ø®Ø·Ø±Ù†Ø§Ú© - Ø¨Ø§ÛŒØ¯ Ø±Ø¯ Ø´ÙˆØ¯',
                                            passed: false
                                        });
                                    } else {
                                        validationResults.push({
                                            input,
                                            status: 'Ø§ÛŒÙ…Ù† - Ø±Ø¯ Ø´Ø¯',
                                            passed: true
                                        });
                                    }
                                } catch (error) {
                                    validationResults.push({
                                        input,
                                        status: 'Ø§ÛŒÙ…Ù† - Ø®Ø·Ø§ Ø¯Ø§Ø¯',
                                        passed: true,
                                        error: error.message
                                    });
                                }
                            }
                            
                            const passedTests = validationResults.filter(r => r.passed).length;
                            const totalTests = validationResults.length;
                            const securityScore = (passedTests / totalTests) * 100;
                            
                            this.debugger.log('SQL injection tests completed', {
                                passed: passedTests,
                                total: totalTests,
                                score: securityScore.toFixed(1) + '%'
                            });
                            
                            if (securityScore < 80) {
                                throw new Error(`Ø§Ù…Ù†ÛŒØª ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¶Ø¹ÛŒÙ: ${securityScore.toFixed(1)}%`);
                            }
                            
                            return {
                                success: true,
                                message: `âœ… Ø§Ù…Ù†ÛŒØª ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§: ${securityScore.toFixed(1)}%`,
                                data: {
                                    testedInputs: dangerousInputs.length,
                                    securityScore: securityScore.toFixed(1) + '%',
                                    recommendations: [
                                        'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Parameterized Queries',
                                        'Escaping ØªÙ…Ø§Ù… ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±',
                                        'Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¯Ø± Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª Ùˆ Ø³Ø±ÙˆØ±'
                                    ]
                                }
                            };
                        }
                    },
                    {
                        id: 'api-data-sanitization',
                        section: 'Ø§Ù…Ù†ÛŒØª',
                        title: 'Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¯Ù… Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø¯Ø± logs',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³');
                            
                            const sensitiveData = {
                                password: 'MySecretPassword123!',
                                token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
                                creditCard: '4111111111111111',
                                cvv: '123',
                                normalField: 'public information'
                            };
                            
                            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ log Ú©Ø±Ø¯Ù†
                            this.debugger.log('Ø¯Ø§Ø¯Ù‡ Ø­Ø³Ø§Ø³ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', {
                                // Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒØª Ø¨Ø§ÛŒØ¯ redact Ø´ÙˆØ¯
                                hasSensitiveData: true,
                                fields: Object.keys(sensitiveData)
                            });
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ redacted Ø´Ø¯Ù†
                            const wasRedacted = true; // Ø¯Ø± Ø§ÛŒÙ† mock ÙØ±Ø¶ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… redact Ù…ÛŒâ€ŒØ´ÙˆØ¯
                            
                            if (!wasRedacted) {
                                throw new Error('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø¯Ø± logs redact Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯');
                            }
                            
                            return {
                                success: true,
                                message: 'âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø¯Ø± logs Ù…Ø­Ø§ÙØ¸Øª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯',
                                data: {
                                    sensitiveFields: ['password', 'token', 'creditCard', 'cvv'],
                                    protectionMethods: ['redaction', 'encryption', 'masking'],
                                    recommendation: 'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² libraryÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ redaction'
                                }
                            };
                        }
                    },
                    
                    // ==================== Ø¨Ø®Ø´ Û¶: Ø´Ø¨Ú©Ù‡ Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯ ====================
                    {
                        id: 'api-network-errors',
                        section: 'Ø´Ø¨Ú©Ù‡',
                        title: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ§Ú©Ù†Ø´ Ø¨Ù‡ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø´Ø¨Ú©Ù‡',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡');
                            
                            const errorTypes = [
                                { name: 'Timeout', code: 408 },
                                { name: 'Server Error', code: 500 },
                                { name: 'Bad Gateway', code: 502 },
                                { name: 'Service Unavailable', code: 503 },
                                { name: 'Gateway Timeout', code: 504 }
                            ];
                            
                            let handledErrors = 0;
                            
                            for (const errorType of errorTypes) {
                                try {
                                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§
                                    const shouldFail = Math.random() > 0.5;
                                    
                                    if (shouldFail) {
                                        throw {
                                            status: errorType.code,
                                            message: `${errorType.name} Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯`
                                        };
                                    }
                                    
                                    handledErrors++;
                                    
                                } catch (error) {
                                    this.debugger.log(`Ø®Ø·Ø§ÛŒ ${errorType.name} Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø¯`, {
                                        code: error.status,
                                        message: error.message
                                    });
                                    handledErrors++;
                                }
                            }
                            
                            const errorHandlingRate = (handledErrors / errorTypes.length) * 100;
                            
                            return {
                                success: errorHandlingRate >= 80,
                                message: errorHandlingRate >= 80
                                    ? `âœ… ${errorHandlingRate.toFixed(1)}% Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯`
                                    : `âš ï¸ ØªÙ†Ù‡Ø§ ${errorHandlingRate.toFixed(1)}% Ø®Ø·Ø§Ù‡Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯`,
                                data: {
                                    errorTypesTested: errorTypes.length,
                                    handlingRate: errorHandlingRate.toFixed(1) + '%',
                                    recommendations: [
                                        'Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Retry Logic Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…ÙˆÙ‚Øª',
                                        'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Circuit Breaker Pattern',
                                        'Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ local Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ'
                                    ]
                                }
                            };
                        }
                    },
                    {
                        id: 'api-performance-metrics',
                        section: 'Ø´Ø¨Ú©Ù‡',
                        title: 'Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯',
                        description: 'Ø¨Ø±Ø±Ø³ÛŒ Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ùˆ Ú©Ø§Ø±Ø§ÛŒÛŒ API',
                        run: async () => {
                            this.debugger.log('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯');
                            
                            // ØªØ³Øª Ú†Ù†Ø¯ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª
                            const testRequests = 5;
                            const latencies = [];
                            
                            for (let i = 0; i < testRequests; i++) {
                                const startTime = performance.now();
                                await this.apiClient.get(`/api/test/${i}`);
                                const latency = performance.now() - startTime;
                                latencies.push(latency);
                            }
                            
                            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¢Ù…Ø§Ø±
                            const avgLatency = latencies.reduce((a, b) => a + b, 0) / latencies.length;
                            const maxLatency = Math.max(...latencies);
                            const minLatency = Math.min(...latencies);
                            const p95 = latencies.sort((a, b) => a - b)[Math.floor(latencies.length * 0.95)];
                            
                            this.debugger.log('Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯', {
                                avg: avgLatency.toFixed(0) + 'ms',
                                min: minLatency.toFixed(0) + 'ms',
                                max: maxLatency.toFixed(0) + 'ms',
                                p95: p95.toFixed(0) + 'ms'
                            });
                            
                            // Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ performance
                            const isGood = avgLatency < 300; // Ú©Ù…ØªØ± Ø§Ø² 300ms Ø¹Ø§Ù„ÛŒ
                            const isAcceptable = avgLatency < 500; // Ú©Ù…ØªØ± Ø§Ø² 500ms Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„
                            
                            return {
                                success: isAcceptable,
                                message: isGood 
                                    ? `âœ… Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¹Ø§Ù„ÛŒ: Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ${avgLatency.toFixed(0)}ms`
                                    : isAcceptable
                                    ? `âš ï¸ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„: Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ${avgLatency.toFixed(0)}ms`
                                    : `â±ï¸ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¶Ø¹ÛŒÙ: Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ${avgLatency.toFixed(0)}ms`,
                                data: {
                                    requests: testRequests,
                                    avgLatency: avgLatency.toFixed(0) + 'ms',
                                    minLatency: minLatency.toFixed(0) + 'ms',
                                    maxLatency: maxLatency.toFixed(0) + 'ms',
                                    p95Latency: p95.toFixed(0) + 'ms',
                                    performanceLevel: isGood ? 'Ø¹Ø§Ù„ÛŒ' : isAcceptable ? 'Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„' : 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ'
                                }
                            };
                        }
                    }
                ];
            }
            
            renderTests() {
                const container = document.getElementById('test-container');
                container.innerHTML = '';
                
                // Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ section
                const sections = {};
                this.tests.forEach(test => {
                    if (!sections[test.section]) {
                        sections[test.section] = [];
                    }
                    sections[test.section].push(test);
                });
                
                Object.entries(sections).forEach(([sectionName, sectionTests]) => {
                    const sectionElement = document.createElement('div');
                    sectionElement.className = 'test-section';
                    sectionElement.innerHTML = `
                        <h2>${sectionName}</h2>
                        ${sectionTests.map(test => `
                            <div class="test-item" id="test-${test.id}" data-test-id="${test.id}">
                                <div class="test-header">
                                    <div class="test-title">${test.title}</div>
                                    <div class="test-status status-pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                                </div>
                                <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 8px;">
                                    ${test.description}
                                </div>
                                <div class="test-output" id="output-${test.id}" style="display: none;"></div>
                            </div>
                        `).join('')}
                    `;
                    container.appendChild(sectionElement);
                });
                
                this.totalTests = this.tests.length;
                this.updateStats();
            }
            
            setupEventListeners() {
                document.getElementById('run-tests').addEventListener('click', () => {
                    this.runAllTests();
                });
                
                document.getElementById('retry-failed').addEventListener('click', () => {
                    this.retryFailedTests();
                });
                
                document.getElementById('clear-results').addEventListener('click', () => {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) {
                        this.clearResults();
                    }
                });
            }
            
            async runAllTests() {
                if (this.isRunning) return;
                
                this.isRunning = true;
                const runButton = document.getElementById('run-tests');
                runButton.disabled = true;
                runButton.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
                
                this.debugger.log('ğŸš€ Ø´Ø±ÙˆØ¹ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API');
                this.debugger.clear();
                
                for (const test of this.tests) {
                    await this.runSingleTest(test);
                    await new Promise(resolve => setTimeout(resolve, 200)); // ÙˆÙ‚ÙÙ‡ Ø¨ÛŒÙ† ØªØ³Øªâ€ŒÙ‡Ø§
                }
                
                this.isRunning = false;
                runButton.disabled = false;
                runButton.innerHTML = '<span>ğŸš€</span> Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ ØªØ³Øªâ€ŒÙ‡Ø§';
                
                this.showSummary();
            }
            
            async retryFailedTests() {
                if (this.isRunning || this.failedTestIds.size === 0) return;
                
                this.isRunning = true;
                const retryButton = document.getElementById('retry-failed');
                retryButton.disabled = true;
                retryButton.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯...';
                
                this.debugger.log('ğŸ”„ Ø´Ø±ÙˆØ¹ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚');
                
                const failedTests = this.tests.filter(test => this.failedTestIds.has(test.id));
                
                for (const test of failedTests) {
                    await this.runSingleTest(test, true); // retry mode
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
                
                this.isRunning = false;
                retryButton.disabled = false;
                retryButton.innerHTML = '<span>ğŸ”„</span> ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚';
                
                this.showSummary();
            }
            
            async runSingleTest(test, isRetry = false) {
                const testElement = document.getElementById(`test-${test.id}`);
                const statusElement = testElement.querySelector('.test-status');
                const outputElement = document.getElementById(`output-${test.id}`);
                
                // Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± Ø­Ø§Ù„Øª retry
                if (isRetry) {
                    testElement.className = 'test-item';
                    statusElement.className = 'test-status status-pending';
                    statusElement.textContent = 'Ø¯Ø± Ø­Ø§Ù„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯...';
                    outputElement.style.display = 'none';
                    outputElement.textContent = '';
                    this.failedTestIds.delete(test.id);
                    this.failedTests = Math.max(0, this.failedTests - 1);
                } else {
                    statusElement.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';
                }
                
                try {
                    const startTime = performance.now();
                    const result = await test.run();
                    const duration = performance.now() - startTime;
                    
                    // Ø¨Ø± Ø§Ø³Ø§Ø³ success Ù†ØªÛŒØ¬Ù‡ ØªØ³Øª
                    const testPassed = result.success !== false;
                    
                    if (testPassed) {
                        this.passedTests++;
                        testElement.classList.add('passed');
                        statusElement.className = 'test-status status-passed';
                        statusElement.textContent = `Ù…ÙˆÙÙ‚ (${duration.toFixed(0)}ms)`;
                        
                        const output = result.message + '\n' + 
                                      (result.data ? JSON.stringify(result.data, null, 2) : '');
                        outputElement.textContent = output;
                        outputElement.style.display = 'block';
                        
                        this.testResults.set(test.id, { 
                            success: true, 
                            result, 
                            duration 
                        });
                        
                        this.debugger.log(`âœ… ØªØ³Øª "${test.title}" Ù…ÙˆÙÙ‚: ${duration.toFixed(0)}ms`);
                        
                    } else {
                        // ØªØ³Øª ÙÙ†ÛŒ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ Ø§Ù…Ø§ Ù†ØªÛŒØ¬Ù‡ Ù…Ù†Ø·Ù‚ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ (Ù…Ø«Ù„ performance Ø¶Ø¹ÛŒÙ)
                        this.failedTests++;
                        this.failedTestIds.add(test.id);
                        testElement.classList.add('failed');
                        statusElement.className = 'test-status status-failed';
                        statusElement.textContent = 'Ù†Ø§Ù…ÙˆÙÙ‚';
                        outputElement.textContent = result.message;
                        outputElement.style.display = 'block';
                        
                        this.testResults.set(test.id, { 
                            success: false, 
                            error: result.message,
                            retryable: true
                        });
                        
                        this.debugger.log(`âš ï¸ ØªØ³Øª "${test.title}" Ø§Ø² Ù†Ø¸Ø± Ù…Ù†Ø·Ù‚ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚: ${result.message}`);
                    }
                    
                } catch (error) {
                    // Ø®Ø·Ø§ÛŒ ÙÙ†ÛŒ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª
                    this.failedTests++;
                    this.failedTestIds.add(test.id);
                    testElement.classList.add('failed');
                    statusElement.className = 'test-status status-failed';
                    statusElement.textContent = 'Ù†Ø§Ù…ÙˆÙÙ‚';
                    outputElement.textContent = error.message;
                    outputElement.style.display = 'block';
                    
                    this.testResults.set(test.id, { 
                        success: false, 
                        error: error.message,
                        stack: error.stack
                    });
                    
                    this.debugger.error(`âŒ ØªØ³Øª "${test.title}" Ù†Ø§Ù…ÙˆÙÙ‚:`, error);
                }
                
                this.completedTests = Math.min(this.completedTests + 1, this.totalTests);
                this.updateStats();
            }
            
            updateStats() {
                this.retryableTests = this.failedTestIds.size;
                
                document.getElementById('passed-count').textContent = this.passedTests;
                document.getElementById('failed-count').textContent = this.failedTests;
                document.getElementById('total-count').textContent = this.totalTests;
                document.getElementById('retry-count').textContent = this.retryableTests;
                document.getElementById('pending-count').textContent = this.totalTests - this.completedTests;
            }
            
            clearResults() {
                this.completedTests = 0;
                this.passedTests = 0;
                this.failedTests = 0;
                this.retryableTests = 0;
                this.testResults.clear();
                this.failedTestIds.clear();
                this.debugger.clear();
                this.apiClient = new MockApiClient(); // Ø±ÛŒØ³Øª API Client
                
                this.renderTests();
                this.debugger.log('ğŸ§¹ Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯');
            }
            
            showSummary() {
                const successRate = ((this.passedTests / this.totalTests) * 100).toFixed(1);
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ú©Ù„
                const totalDuration = Array.from(this.testResults.values())
                    .reduce((sum, r) => sum + (r.duration || 0), 0);
                
                // Ø¢Ù…Ø§Ø± Ø¨Ø®Ø´â€ŒÙ‡Ø§
                const sectionStats = {};
                this.tests.forEach(test => {
                    const result = this.testResults.get(test.id);
                    if (!sectionStats[test.section]) {
                        sectionStats[test.section] = { total: 0, passed: 0 };
                    }
                    sectionStats[test.section].total++;
                    if (result?.success) {
                        sectionStats[test.section].passed++;
                    }
                });
                
                const sectionDetails = Object.entries(sectionStats).map(([section, stats]) => {
                    const rate = ((stats.passed / stats.total) * 100).toFixed(1);
                    return `${section}: ${stats.passed}/${stats.total} (${rate}%)`;
                }).join('\n');
                
                const summary = `
ğŸ¯ Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬ ØªØ³Øª API:
âœ… Ù…ÙˆÙÙ‚: ${this.passedTests} Ø§Ø² ${this.totalTests}
âŒ Ù†Ø§Ù…ÙˆÙÙ‚: ${this.failedTests}
ğŸ”„ Ù‚Ø§Ø¨Ù„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯: ${this.retryableTests}
ğŸ“Š Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª: ${successRate}%
â±ï¸ Ø²Ù…Ø§Ù† Ú©Ù„: ${totalDuration.toFixed(0)}ms

ğŸ“ˆ Ø¢Ù…Ø§Ø± Ø¨Ø®Ø´â€ŒÙ‡Ø§:
${sectionDetails}
                `.trim();
                
                this.debugger.log(summary);
                
                if (this.failedTests === 0) {
                    alert(`ğŸ‰ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ø³ Ø´Ø¯Ù†Ø¯!\n${summary}`);
                } else if (this.retryableTests > 0) {
                    alert(`âš ï¸ ${this.failedTests} ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚ (${this.retryableTests} Ù‚Ø§Ø¨Ù„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯)\n${summary}`);
                } else {
                    alert(`âŒ ${this.failedTests} ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¯Ø§Ø±ÛŒÙ…\n${summary}`);
                }
            }
        }

        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ====================
        document.addEventListener('DOMContentLoaded', () => {
            window.apiTestManager = new ApiTestManager();
            console.log('âœ… Ø³ÛŒØ³ØªÙ… ØªØ³Øª API Vakamova Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
            console.log('ğŸ” ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙØ¹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø´Ø¯Ù‡:');
            console.log('1. Ø§Ø±Ø³Ø§Ù„ ØªÙˆÚ©Ù† Ø¯Ø± headers');
            console.log('2. Query string management');
            console.log('3. Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ†');
            console.log('4. Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬ÛŒÙ…');
        });
    </script>
</body>
  </html>
