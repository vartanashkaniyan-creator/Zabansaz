// ==================== Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ ====================
const PROJECT_MODULES = [
    // Ù‡Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ
    { name: 'Event Bus', path: 'core/event_bus.js', type: 'core' },
    { name: 'State Manager', path: 'core/state_manager.js', type: 'core' },
    { name: 'Context Provider', path: 'core/context_provider.js', type: 'core' },
    { name: 'API Client', path: 'core/api_client.js', type: 'core' },
    { name: 'Router Middleware', path: 'core/router_middleware.js', type: 'core' },
    { name: 'Guards', path: 'core/guards.js', type: 'core' },
    
    // Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ
    { name: 'Auth Manager', path: 'modules/auth/auth_manager.js', type: 'auth' },
    { name: 'Token Manager', path: 'modules/auth/token_manager.js', type: 'auth' },
    { name: 'Auth Middleware', path: 'modules/auth/auth_middleware.js', type: 'auth' },
    { name: 'Lesson Engine', path: 'modules/lessons/engine.js', type: 'lesson' },
    // âœ… ØªØºÛŒÛŒØ± Û±: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Button Ø¨Ù‡ Ù„ÛŒØ³Øª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
    { name: 'Button Component', path: 'components/Button.js', type: 'ui' },
    
    // ØµÙØ­Ø§Øª
    { name: 'Auth View', path: 'pages/auth/auth_view.js', type: 'page' },
    { name: 'Home Page', path: 'pages/home/home_page.js', type: 'page' },
    { name: 'Router', path: 'pages/router.js', type: 'page' }
];

// ==================== ØªØ³Øª Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ù…Ù„ Ú©Ø§Ø±Ø¨Ø± ====================
async function runFullIntegrationTest() {
    console.log('ğŸš€ Ø´Ø±ÙˆØ¹ ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ú©Ø§Ù…Ù„ Vakamova');
    
    // Ù…Ø±Ø­Ù„Ù‡ Û±: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
    const loadResults = await loadAllModules();
    if (!loadResults.success) {
        console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§');
        return;
    }
    
    // Ù…Ø±Ø­Ù„Ù‡ Û²: ØªØ³Øª Ø¬Ø±ÛŒØ§Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
    console.log('ğŸ” ØªØ³Øª Ø¬Ø±ÛŒØ§Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª...');
    const authTest = await testAuthFlow();
    if (!authTest.success) {
        console.error('âŒ Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯');
        return;
    }
    
    // Ù…Ø±Ø­Ù„Ù‡ Û³: ØªØ³Øª Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§
    console.log('ğŸ“ ØªØ³Øª Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§...');
    const routingTest = await testRoutingAndGuards();
    
    // Ù…Ø±Ø­Ù„Ù‡ Û´: ØªØ³Øª Ù…Ø§Ú˜ÙˆÙ„ Ø¯Ø±Ø³
    console.log('ğŸ“š ØªØ³Øª Ù…ÙˆØªÙˆØ± Ø¯Ø±Ø³â€ŒÙ‡Ø§...');
    const lessonTest = await testLessonModule();
    
    // âœ… ØªØºÛŒÛŒØ± Û²: ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ØªØ³Øª Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Button
    const buttonTest = await testButtonComponent();
    
    // Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬
    console.log('\nğŸ“Š ========== Ù†ØªØ§ÛŒØ¬ Ù†Ù‡Ø§ÛŒÛŒ ØªØ³Øª ==========');
    console.log(`âœ… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡: ${loadResults.loadedCount}/${PROJECT_MODULES.length}`);
    console.log(`âœ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª: ${authTest.success ? 'Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡' : 'Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯'}`);
    console.log(`ğŸ“ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ: ${routingTest.success ? 'ÙØ¹Ø§Ù„' : 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…'}`);
    console.log(`ğŸ“š Ù…ÙˆØªÙˆØ± Ø¯Ø±Ø³: ${lessonTest.success ? 'Ø¢Ù…Ø§Ø¯Ù‡' : 'Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡'}`);
    // âœ… ØªØºÛŒÛŒØ± Û³: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù†ØªÛŒØ¬Ù‡ ØªØ³Øª Button Ø¨Ù‡ Ø®Ù„Ø§ØµÙ‡
    console.log(`ğŸ¯ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Button: ${buttonTest.success ? 'Ø¢Ù…Ø§Ø¯Ù‡' : 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ'}`);
    console.log('ğŸ‰ ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ú©Ø§Ù…Ù„ Ø´Ø¯!');
    
    // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯
    if (authTest.success && routingTest.success) {
        console.log('\nğŸ’¡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ø¹Ø¯ÛŒ: ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ (index.html) Ùˆ Ø§ØªØµØ§Ù„ Router');
    }
}
